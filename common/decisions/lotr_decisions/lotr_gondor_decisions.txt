### Gondor Decisions ###
decision_gondor_regnal_names = {
	sort_order = 25
	title = decision_gondor_regnal_names
	picture = {
		reference = "gfx/interface/illustrations/decisions/decision_minas_tirith_01.dds"
	}

	decision_group_type = realms_in_exile_minor
	
	ai_goal = no
	ai_check_interval = 12
	ai_potential = {
		always = yes
	}
	ai_will_do = {
		base = 100
	}
	selection_tooltip = decision_gondor_regnal_names_tooltip
	desc = decision_gondor_regnal_names_desc
	confirm_text = decision_gondor_regnal_names_confirm
	
	is_shown = {
		##Quonton
		culture = { 
			OR = { 
				has_cultural_pillar = heritage_dunedain 
				has_cultural_tradition = tradition_new_numenor
			}	
		}
		OR = { 
			has_title = title:e_gondor
			has_title = title:e_reunitedkingdom
		}
		##End Quonton
		##Quonton - Women should be able to too
		#is_male = yes
		NOT = {
			has_character_flag = has_regnal_name
		}
	}
	
	is_valid_showing_failures_only = {
		is_imprisoned = no
		is_available_adult = yes
		is_at_war = no
	}
	
	effect = {
		custom_tooltip = decision_gondor_regnal_names_tooltip
		trigger_event = {
			id = gondor.1100
		}	
	}
}

decision_gondorian_renaissance = { # Little Gondorian Renaissance post Mordor Destroyed
	sort_order = 22
	picture = {
		reference = "gfx/interface/illustrations/decisions/decision_minas_tirith_01.dds"
	}
	desc = decision_gondorian_renaissance_desc
	selection_tooltip = decision_gondorian_renaissance_tooltip
	confirm_text = decision_gondorian_renaissance_confirm

	decision_group_type = realms_in_exile_major
	
	ai_goal = yes

	is_shown = {
		current_year >= 6083

		##Quonton
		culture = { 
			OR = { 
				has_cultural_pillar = heritage_dunedain 
				has_cultural_tradition = tradition_new_numenor
			}
		}
		##End Quonton
		OR = {
			is_gondor = yes
			has_primary_title = title:e_numenor_in_exile
			has_primary_title = title:e_reunitedkingdom
		}
		faith_is_good = yes

		is_ruler = yes
		is_landed = yes
		culture = {
			has_cultural_era_or_later = culture_era_late_medieval
		}
		NOT = {  #Can only do it once.
			is_target_in_global_variable_list = {
				name = unavailable_unique_decisions
				target = flag:flag_gondorian_renaissance
			}
		}
		#highest_held_title_tier = 4 #Kings and Emperors only.
		NOR = {
			government_has_flag = government_is_theocracy
			government_has_flag = government_is_clan
			government_has_flag = government_is_tribal
		}
	}
	
	is_valid = {
		#Must control the royal provinces and vanquish the threat of Umbar
		completely_controls_region = custom_gondorian_heartlands
		completely_controls = title:k_umbar

		custom_tooltip = {
			text = dark_lord_is_gone.tt
			OR = {
				character:lineofsauron = {
					is_alive = no
				}
				character:lineofsauron = {
					is_landed = no
				}
			}
			#title:e_mordor.holder ?= {
			#	NOT = { faith.religion = { is_in_family = rf_forcesofevil } }
			#}
		}
		
		prestige_level >= 4
		learning >= 15
		NOT = { has_realm_law = crown_authority_0 }
		NOT = { has_realm_law = crown_authority_1 }

		#Must have basic innovations:
		#root.culture = {
		#	has_innovation = innovation_royal_prerogative
		#	has_innovation = innovation_knighthood
		#	has_innovation = innovation_windmills
		#}
	}

	is_valid_showing_failures_only = {
		is_capable_adult = yes
		is_imprisoned = no
		is_at_war = no
	}

	cost = {
		gold = 800
		prestige = 5000
	}

	effect = {
		gondorian_renaissance_scripted_effect = yes
		if = {
			limit = { # Minor News
				has_game_rule = all_news
			}
			every_player = { #Global News Announcement
				trigger_event = news_event.0024
			}
		}

		trigger_event = gondor.3601 # Gondorian Renaissance flavour event

		hidden_effect = {
			add_to_global_variable_list = {
				name = unavailable_unique_decisions
				target = flag:flag_gondorian_renaissance
			}
		}
	}
	
	ai_potential = {
		always = yes
	}

	ai_will_do = {
		base = 15
		ai_value_modifier = {
			ai_boldness = 1.0
		}
	}
}

decision_claim_gondor_kingship = { # Allows native Gondorians to restore the Kingdom of Gondor and claim the throne in case Aragorn doesn't come back
	sort_order = 21
	picture = {
		reference = "gfx/interface/illustrations/decisions/decision_minas_tirith_01.dds"
	}
	desc = {
		first_valid = {
			triggered_desc = {
				trigger = {				
					has_primary_title = title:e_gondor_steward
				}
				desc = decision_claim_gondor_kingship_stewards_desc
			}
		desc = decision_claim_gondor_kingship_desc
		}
	}

	decision_group_type = realms_in_exile_major
	
	selection_tooltip = decision_claim_gondor_kingship_tooltip
	confirm_text = decision_claim_gondor_kingship_confirm
	
	ai_goal = no
	ai_check_interval = 12
	ai_potential = {
		always = yes
	}
	is_shown = {
		OR = {
			has_title = title:e_gondor_steward
			top_liege = title:e_gondor_steward.holder
		}
		current_year >= 6083 # After Earnur's Death
		is_landed = yes
		#has_trait = ambitious # Maybe only for ambitious Gondorians?
		NOR = {  #Can only do it once.
			is_target_in_global_variable_list = {
				name = unavailable_unique_decisions
				target = flag:flag_claim_gondor_kingship
			}
			is_target_in_global_variable_list = { # If Aragorn has returned to Gondor... disable
				name = unavailable_unique_decisions
				target = flag:aragorn_returned_to_gondor
			}
			title:e_reunitedkingdom = {
				is_title_created = yes # If the Reunited Kingdom somehow exists but the decision WASN'T taken... disable
			}
			title:e_numenor_in_exile = {
				is_title_created = yes # If Numenor-in-Exile somehow exists but the decision WASN'T taken... disable
			}
			title:e_castamir = {
				is_title_created = yes # If there is a King of Gondor already, you can claim it the traditional way
			}
			title:e_gondor = {
				OR = {
					is_title_created = yes # If there is a King of Gondor already, you can claim it the traditional way
					is_titular = no # If Gondor is no longer titular... disable
				}
			}
		}
	}

	is_valid = {
		#custom_tooltip = gondor_kingship_tt_basic
		has_title = title:e_gondor_steward
		trigger_if = { # Hidden if fulfilled, to make it less crowded
			limit = {
				NOT = {
					government_has_flag = government_is_feudal
				}
			}
			government_has_flag = government_is_feudal
		}
		trigger_if = { # Hidden if fulfilled, to make it less crowded
			limit = {
				NOT = {
					##Quonton
					culture = { 
						OR = { 
							has_cultural_pillar = heritage_dunedain 
							has_cultural_tradition = tradition_new_numenor
						}
					}
					##End Quonton
				}
			}
			##Quonton
			culture = { 
				OR = { 
					has_cultural_pillar = heritage_dunedain 
					has_cultural_tradition = tradition_new_numenor
				}
			}
			##End Quonton
		}
		trigger_if = { # Hidden if fulfilled, to make it less crowded
			limit = {
				NOT = {
					faith.religion = religion:dunedain_religion
				}
			}
			faith.religion = religion:dunedain_religion
		}
		trigger_if = { # Hidden if fulfilled, to make it less crowded
			limit = {
				is_tributary = yes
			}
			is_tributary = no
		}
		#sub_realm_size >= 75
		#highest_held_title_tier >= tier_kingdom
		legitimacy_level >= 5
		prestige_level >= 3
		completely_controls_region = custom_gondorian_heartlands # Juke note: Should cover the important bits
		any_powerful_vassal = {
			count = all
			OR = {
				opinion = {
					target = root
					value >= 80
				}
				#root = { has_strong_hook = prev } # Throws errors
			}
		}
		trigger_if = {
			limit = {
				house = house:house_gondorstewards
			}
			custom_tooltip = {
				text = gondor_kingship_tt_extra_requirement
				OR = {
					has_trait = ambitious
					has_trait = arrogant
					has_trait = arbitrary
				}
			}
		}
		#any_vassal = {
		#	count = all
		#	OR = {
		#		opinion = {
		#			target = root
		#			value >= 75
		#		}
		#		# root = { has_strong_hook = prev }
		#	}
		#}
	
		### Dynamic Requirements
		# by Juke
		# Must aquire a certain amount of "Points
		# Some requirements count as multiple points and are duplicate
		
		custom_tooltip = gondor_kingship_tt_points
		calc_true_if = { # Dynamic Requirements
			amount >= 5
			
			### 3 Points
			# Anarion or Isildur Dynasty
			custom_description = {
				text = gondor_kingship_tt_dynasty
				subject = character:lineofanarion1
				object = character:lineisildur0
				OR = {
					dynasty = character:lineofanarion1.dynasty
					dynasty = character:lineisildur0.dynasty
				}
			}
			custom_tooltip = {
				text = gondor_kingship_tt_hidden
				OR = {
					dynasty = character:lineofanarion1.dynasty
					dynasty = character:lineisildur0.dynasty
				}
			}
			custom_tooltip = {
				text = gondor_kingship_tt_hidden
				OR = {
					dynasty = character:lineofanarion1.dynasty
					dynasty = character:lineisildur0.dynasty
				}
			}
			
			# Anarion legend completed on mythical level
			trigger_if = {
				limit = { 
					has_dlc_feature = legends
					is_ai = no
				}
				custom_tooltip = {
					text = finished_anarion_legend_tt
					house = { has_house_modifier = heirs_of_anarion_modifier }
				}
			}
			# These need to be seperate because it wasn't counting them when as one trigger_if
			trigger_if = {
				limit = { 
					has_dlc_feature = legends
					is_ai = no
				}
				custom_tooltip = {
					text = gondor_kingship_tt_hidden
					house = { has_house_modifier = heirs_of_anarion_modifier }
				}
			}
			trigger_if = {
				limit = { 
					has_dlc_feature = legends
					is_ai = no
				}
				custom_tooltip = {
					text = gondor_kingship_tt_hidden
					house = { has_house_modifier = heirs_of_anarion_modifier }
				}
			}
			
			# Your Dynasty killed Sauron
			custom_tooltip = {
				text = gondor_kingship_tt_dark_lord
				is_target_in_global_variable_list = {
					name = unavailable_unique_decisions
					target = flag:decision_destroy_mordor
				}
				dynasty = { has_variable = this_dynasty_killed_sauron }
			}
			custom_tooltip = {
				text = gondor_kingship_tt_hidden
				is_target_in_global_variable_list = {
					name = unavailable_unique_decisions
					target = flag:decision_destroy_mordor
				}
				dynasty = { has_variable = this_dynasty_killed_sauron }
			}
			custom_tooltip = {
				text = gondor_kingship_tt_hidden
				is_target_in_global_variable_list = {
					name = unavailable_unique_decisions
					target = flag:decision_destroy_mordor
				}
				dynasty = { has_variable = this_dynasty_killed_sauron }
			}
			
			### 2 Points
			# You arent, but your Mum/Dad was Anarion or Isildur Dynasty
			custom_description = {
				text = gondor_kingship_tt_parents_dynasty
				subject = character:lineofanarion1
				object = character:lineisildur0
				NOR = {
					dynasty = character:lineofanarion1.dynasty
					dynasty = character:lineisildur0.dynasty
				}
				any_parent ?= {
					OR = {
						dynasty ?= character:lineofanarion1.dynasty
						dynasty ?= character:lineisildur0.dynasty
					}
				}
			}
			custom_tooltip = {
				text = gondor_kingship_tt_hidden
				NOR = {
					dynasty = character:lineofanarion1.dynasty
					dynasty = character:lineisildur0.dynasty
				}
				any_parent ?= {
					OR = {
						dynasty ?= character:lineofanarion1.dynasty
						dynasty ?= character:lineisildur0.dynasty
					}
				}
			}
			
			# You have a claim on the Kingship
			custom_tooltip = {
				text = gondor_kingship_tt_claim_on_kingship
				any_claim = {
					OR = {
						this = title:e_gondor
						this = title:e_castamir # Included to avoid weirdness (Though it may cause weirdness? I dunno)
					}
				}
			}
			
			# Osgiliath restored (At least level 4 on both sides)
			custom_tooltip = {
				text = gondor_kingship_tt_osgiliath
				completely_controls = title:c_osgiliath
				province:202 = { has_building_or_higher = wonder_osgiliath_05 }
				province:203 = { has_building_or_higher = wonder_osgiliath_05 }
			}
			custom_tooltip = {
				text = gondor_kingship_tt_hidden
				completely_controls = title:c_osgiliath
				province:202 = { has_building_or_higher = wonder_osgiliath_05 }
				province:203 = { has_building_or_higher = wonder_osgiliath_05 }
			}
			
			### 1 Point
			# Minas Ithil rebuilt and cleansed
			custom_tooltip = {
				text = gondor_kingship_tt_minas_ithil
				completely_controls = title:c_minas_ithil
				title:c_minas_ithil = {
					NOR = {
						has_county_modifier = morgul_corruption_modifier
						has_county_modifier = fading_morgul_corruption_modifier
					}
				}
				province:226 = { has_building_or_higher = wonder_minas_ithil_03 }
			}
			
			# Dynasty has high level of splendor
			custom_tooltip = {
				text = gondor_kingship_tt_dynasty_prestige
				dynasty = { dynasty_prestige_level >= 8 }
			}
			
			# Living Legend level of Prestige
			custom_tooltip = {
				text = gondor_kingship_tt_prestige_level_5
				prestige_level >= 5
			}
			
			# High blood tier
			custom_tooltip = {
				text = gondor_kingship_tt_numenorean_blood
				has_trait_rank = {
					trait = blood_of_numenor
					rank >= 4
				}
			}
			
			# Reclaimed 2+ Gondorian Provinces
			custom_tooltip = {
				text = gondor_kingship_tt_integrated_provinces_1
				dynasty = {
					exists = var:reintegrated_provinces_counter
					var:reintegrated_provinces_counter >= 2
				}
			}
			
			# Reclaimed 3+ Gondorian Provinces
			custom_tooltip = {
				text = gondor_kingship_tt_integrated_provinces_2
				dynasty = {
					exists = var:reintegrated_provinces_counter
					var:reintegrated_provinces_counter >= 3
				}
			}
			
			# Reclaimed 4+ Gondorian Provinces
			custom_tooltip = {
				text = gondor_kingship_tt_integrated_provinces_3
				dynasty = {
					exists = var:reintegrated_provinces_counter
					var:reintegrated_provinces_counter >= 4
				}
			}
		}
	}

	is_valid_showing_failures_only = {
		is_capable_adult = yes
		is_imprisoned = no
		is_at_war = no
	}

	cost = {
		gold = 800
		prestige = 5000
	}

	effect = {
		show_as_tooltip = {
			stewards_claim_gondor_kingship_effect = yes
		}
		trigger_event = gondor.3700
	}

	ai_will_do = {
		base = 100
		ai_value_modifier = {
			ai_boldness = 1.0
		}
	}
}

decision_reclaim_gondor_kingship = {
	sort_order = 21
	picture = {
		reference = "gfx/interface/illustrations/decisions/decision_minas_tirith_01.dds"
	}
	decision_group_type = realms_in_exile_major
	
	ai_goal = yes
	ai_potential = {
		always = yes
	}
	ai_will_do = {
		base = 100
	}
	desc = decision_reclaim_gondor_kingship_desc
	confirm_text = decision_reclaim_gondor_kingship_confirm
	selection_tooltip = decision_reclaim_gondor_kingship_tooltip
	
	is_shown = {
		##Quonton
		culture = { 
			OR = { 
				has_cultural_pillar = heritage_dunedain 
				has_cultural_tradition = tradition_new_numenor
			}
		}
		##End Quonton
		has_title = title:e_castamir
		NOT = {
			house = house:house_castamir
			dynasty = dynasty:dynasty_kamal
			house = { has_house_modifier = heirs_of_castamir_modifier }
			has_character_flag = accepted_castamir
		}
		OR = {
			dynasty = dynasty:dynasty_elendil
			dynasty = dynasty:dynasty_anarion
		}
	}

	is_valid = {
		NOT = { culture = { any_parent_culture_or_above = { this = culture:umbaredain } } }
		faith.religion  = faith:faith_edain.religion
		prestige_level >= 5
		piety_level >= 3
	}

	cost = {
		gold = 800
		prestige = 5000
	}

	effect = {
		trigger_event = gondor.7000
	}
}

### League of Pelargir Decisions ###
decision_league_of_pelargir = {
	sort_order = 70
	title = decision_league_of_pelargir
	picture = {
		reference = "gfx/interface/illustrations/decisions/decision_minas_tirith_01.dds"
	}

	decision_group_type = realms_in_exile_major
	
	ai_goal = no
	ai_check_interval = 72
	ai_potential = {
		always = yes
	}
	ai_will_do = {
		base = 100
	}
	selection_tooltip = decision_league_of_pelargir_tooltip
	desc = decision_league_of_pelargir_desc
	confirm_text = decision_league_of_pelargir_confirm
	
	is_shown = {
		is_ruler = yes
		is_landed = yes
		##Quonton
		culture = { 
			OR = { 
				has_cultural_pillar = heritage_dunedain 
				has_cultural_tradition = tradition_new_numenor
			}	
		}
		##End Quonton
		has_title = title:d_pelargir
		NOR = {
			is_target_in_global_variable_list = {
				name = unavailable_unique_decisions
				target = flag:league_of_pelargir_decision
			}
			is_gondor = yes
			has_title = title:e_numenor_in_exile
		}
	}
	
	is_valid_showing_failures_only = {
		is_imprisoned = no
		is_available_adult = yes
		is_at_war = no
	}
	
	is_valid = {
		is_independent_ruler = yes
		completely_controls_region = custom_pelargir_league
		prestige_level >= very_high_prestige_level
	}
	
	effect = {
		if = { # Lebenexit | Achievement
			limit = {
				NOT = { exists = global_var:lotr_achievement_57 }
				is_ai = no
				realms_achievements_enabled = yes
				OR = { 
					primary_title = title:k_lebennin
					primary_title = title:d_pelargir
				}
			}
			set_global_variable = lotr_achievement_57
		}
		create_title_and_vassal_change = {
			type = created
			save_scope_as = change
			add_claim_on_loss = yes
		}
		title:k_pelargir = {
			change_title_holder = {
				holder = root
				change = scope:change
			}
		}
		title:d_pelargir = {
			set_de_jure_liege_title = title:k_pelargir
		}
		title:d_lebennivet = {
			set_de_jure_liege_title = title:k_pelargir
		}
		title:d_tolfalas = {
			set_de_jure_liege_title = title:k_pelargir
		}
		title:d_annun = {
			set_de_jure_liege_title = title:k_pelargir
		}
		title:d_laergaladrin = {
			set_de_jure_liege_title = title:k_pelargir
		}
		title:d_harithilien = {
			set_de_jure_liege_title = title:k_pelargir
		}
		resolve_title_and_vassal_change = scope:change
		add_to_global_variable_list = {
			name = unavailable_unique_decisions
			target = flag:league_of_pelargir_decision
		}
		title:c_pelargir = {
			change_development_level = 5
		}
		title:d_pelargir = {
			change_development_level = 3
		}
		title:k_pelargir = {
			set_de_jure_liege_title = title:e_numenor_colonies
		}
		destroy_title = title:k_lebennin
		custom_tooltip = league_of_pelargir_decision
	}
}

decision_colonial_belfalas = {
	sort_order = 67
	title = decision_colonial_belfalas
	picture = {
		reference = "gfx/interface/illustrations/decisions/decision_minas_tirith_01.dds"
	}

	decision_group_type = realms_in_exile_major
	
	ai_goal = no
	ai_check_interval = 72
	ai_potential = {
		always = yes
	}
	ai_will_do = {
		base = 100
	}
	selection_tooltip = decision_colonial_belfalas_tooltip
	desc = decision_colonial_belfalas_desc
	confirm_text = decision_colonial_belfalas_confirm
	
	is_shown = {
		is_ruler = yes
		is_landed = yes
		##Quonton
		culture = { 
			OR = { 
				has_cultural_pillar = heritage_dunedain 
				has_cultural_tradition = tradition_new_numenor
			}	
		}
		##End Quonton
		has_title = title:k_pelargir
		is_target_in_global_variable_list = {
			name = unavailable_unique_decisions
			target = flag:league_of_pelargir_decision
		}
		NOT = {
			is_target_in_global_variable_list = {
			name = unavailable_unique_decisions
			target = flag:colonial_belfalas_decision
			}
		}
	}
	
	is_valid_showing_failures_only = {
		is_imprisoned = no
		is_available_adult = yes
		is_at_war = no
	}
	
	is_valid = {
		is_independent_ruler = yes
		completely_controls = title:k_belfalas
		prestige_level >= 3
	}
	
	effect = {
		title:k_belfalas = {
			set_de_jure_liege_title = title:e_numenor_colonies
		}
		add_to_global_variable_list = {
			name = unavailable_unique_decisions
			target = flag:colonial_belfalas_decision
		}
	}
}

decision_colonial_umbar = {
	sort_order = 66
	title = decision_colonial_umbar
	picture = {
		reference = "gfx/interface/illustrations/decisions/decision_minas_tirith_01.dds"
	}

	decision_group_type = realms_in_exile_major
	
	ai_goal = no
	ai_check_interval = 72
	ai_potential = {
		always = yes
	}
	ai_will_do = {
		base = 100
	}
	selection_tooltip = decision_colonial_umbar_tooltip
	desc = decision_colonial_umbar_desc
	confirm_text = decision_colonial_umbar_confirm
	
	is_shown = {
		is_ruler = yes
		is_landed = yes
		##Quonton
		culture = { 
			OR = { 
				has_cultural_pillar = heritage_dunedain 
				has_cultural_tradition = tradition_new_numenor
			}	
		}
		##End Quonton
		has_title = title:k_pelargir
		is_target_in_global_variable_list = {
			name = unavailable_unique_decisions
			target = flag:league_of_pelargir_decision
		}
		NOT = {
			is_target_in_global_variable_list = {
			name = unavailable_unique_decisions
			target = flag:colonial_umbar_decision
			}
		}
	}
	
	is_valid_showing_failures_only = {
		is_imprisoned = no
		is_available_adult = yes
		is_at_war = no
	}
	
	is_valid = {
		is_independent_ruler = yes
		completely_controls = title:k_umbar
		prestige_level >= 3
	}
	
	effect = {
		title:k_umbar = {
			set_de_jure_liege_title = title:e_numenor_colonies
		}
		title:c_umbar = {
			change_development_level = 5
		}
		title:d_umbar = {
			change_development_level = 3
		}
		add_to_global_variable_list = {
			name = unavailable_unique_decisions
			target = flag:colonial_umbar_decision
		}
	}
}

decision_colonial_harnen = {
	sort_order = 65
	title = decision_colonial_harnen
	picture = {
		reference = "gfx/interface/illustrations/decisions/decision_near_harad_01.dds"
	}

	decision_group_type = realms_in_exile_major
	
	ai_goal = no
	ai_check_interval = 72
	ai_potential = {
		always = yes
	}
	ai_will_do = {
		base = 100
	}
	selection_tooltip = decision_colonial_harnen_tooltip
	desc = decision_colonial_harnen_desc
	confirm_text = decision_colonial_harnen_confirm
	
	is_shown = {
		is_ruler = yes
		is_landed = yes
		##Quonton
		culture = { 
			OR = { 
				has_cultural_pillar = heritage_dunedain 
				has_cultural_tradition = tradition_new_numenor
			}	
		}
		##End Quonton
		has_title = title:k_pelargir
			AND = {
				is_target_in_global_variable_list = {
					name = unavailable_unique_decisions
					target = flag:league_of_pelargir_decision
				}
				is_target_in_global_variable_list = {
					name = unavailable_unique_decisions
					target = flag:harnen_kingdom_decision
				}
			NOT = {
				is_target_in_global_variable_list = {
					name = unavailable_unique_decisions
					target = flag:colonial_harnen_decision
				}
			}
		}
	}
	
	is_valid_showing_failures_only = {
		is_imprisoned = no
		is_available_adult = yes
		is_at_war = no
	}
	
	is_valid = {
		is_independent_ruler = yes
		completely_controls = title:k_mirlond
		completely_controls = title:d_harfalas
		prestige_level >= 3
	}
	
	effect = {
		title:k_mirlond = {
			set_de_jure_liege_title = title:e_numenor_colonies
		}
		title:d_harfalas = {
			set_de_jure_liege_title = title:k_mirlond
		}
		add_to_global_variable_list = {
			name = unavailable_unique_decisions
			target = flag:colonial_harnen_decision
		}
	}
}

## Destroy Mordor ##
decision_destroy_mordor = {
	sort_order = 100
	title = decision_destroy_mordor
	picture = {
		trigger = {
			OR = {
				is_gondor = yes
				has_primary_title = title:e_numenor_in_exile
				has_primary_title = title:e_reunitedkingdom
				has_primary_title = title:e_numenor #Submod Numenor
			}
		}
		reference = "gfx/interface/illustrations/decisions/decision_gondor_01.dds"
	}
	picture = {
		trigger = {
			culture ?= {
				OR = {
					has_cultural_pillar = heritage_ioriag
					has_cultural_pillar = heritage_igath
				}
			}
		}
		reference = "gfx/interface/illustrations/decisions/decision_huz_02.dds"
	}
	picture = {
		reference = "gfx/interface/illustrations/decisions/decision_barad_dur_01.dds"
	}

	decision_group_type = realms_in_exile_major
	
	ai_check_interval = 8
	ai_potential = {
		always = yes
	}
	ai_will_do = {
		base = 100
		modifier = { # AI will be less keen if Mordor is stronger than them
			factor = 0.5
			root.total_strength < title:e_mordor.holder.total_strength
		}
	}
	selection_tooltip = decision_destroy_mordor_tooltip
	desc = {
		first_valid = {
			triggered_desc = {
				trigger = {
					OR = {
						is_gondor = yes
						has_primary_title = title:e_numenor_in_exile
						has_primary_title = title:e_reunitedkingdom
						has_primary_title = title:e_numenor #Submod Numenor
					}
				}
				desc = decision_destroy_mordor_desc
			}
			desc = decision_destroy_mordor_generic_desc
		}
	}
	confirm_text = decision_destroy_mordor_confirm
	
	cooldown = { years = 20 }

	is_shown = {
		is_ai = no
		is_ruler = yes
		is_landed = yes
		exists = title:e_mordor.holder
		title:e_mordor.holder = { is_maiar_fallen = yes }
		OR = {
			is_gondor = yes
			has_primary_title = title:e_numenor_in_exile
			has_primary_title = title:e_numenor #Submod Numenor
			has_primary_title = title:e_reunitedkingdom
			any_neighboring_top_liege_realm_owner = { this = title:e_mordor.holder }
		}	
		# lotr_has_numenorean_culture_trigger = yes
		NOR = {
			is_target_in_global_variable_list = {
				name = unavailable_unique_decisions
				target = flag:decision_destroy_mordor
			}
			has_title = title:e_mordor
		}
	}
	is_valid_showing_failures_only = {
		is_imprisoned = no
		is_available_adult = yes
		is_at_war = no
		gold >= 0
		NOR = {
			has_truce = title:e_mordor.holder
		}
		NOT = {
			custom_description = {
				text = faith_is_evil
				subject = this
				faith_is_evil = yes
			}
		}
		custom_tooltip = {
			text = IS_TRIBUTARY_OF_SAURON
			NAND = {
				is_tributary = yes
				suzerain = { is_maiar_fallen = yes }
			}
		}
	}
	is_valid = {
		prestige_level >= very_high_prestige_level
		AND = {
			trigger_if = {
				limit = {
					OR = {
						is_gondor = yes
						has_primary_title = title:e_numenor_in_exile
						has_primary_title = title:e_numenor #Submod Numenor
						has_primary_title = title:e_reunitedkingdom
					}
				}
				completely_controls_region = custom_gondorian_heartlands
			}
			trigger_if = {
				limit = { is_elf = yes }
				custom_tooltip = {
					text = destroy_mordor_decision_current_military_strength_elven_tt
					root.script_current_military_strength >= title:e_mordor.holder.lotr_twenty_five_percent_of_current_military_strength
				}
			} 
			trigger_else_if = {
				limit = { is_dwarf = yes }
				custom_tooltip = {
					text = destroy_mordor_decision_current_military_strength_dwarven_tt
					root.script_current_military_strength >= title:e_mordor.holder.a_third_of_current_military_strength
				}
			} 
			trigger_else = {
				custom_tooltip = {
					text = destroy_mordor_decision_current_military_strength_default_tt
					root.script_current_military_strength >= title:e_mordor.holder.fifty_percent_of_current_military_strength
				}
			}
		}
		is_independent_ruler = yes
		#lotr_armies_are_outnumbered = no	#juke note: commented out, unlocalizd trigger and theres no reason to lock the player from trying to defeat sauron even if they are outnumbered
	}
	effect = {
		play_music_cue = lotr_cue_gondor
		custom_tooltip = destroy_mordor_decision
		if = {
			limit = {
				OR = {
					is_gondor = yes
					has_primary_title = title:e_numenor_in_exile
					has_primary_title = title:e_numenor #Submod Numenor
					has_primary_title = title:e_reunitedkingdom
				}
			}
			trigger_event = gondor.2100
		} 
		else = {
			if = {
				limit = { exists = title:e_mordor.holder }
				start_war = {
					casus_belli = final_battle_gondor_cb
					target = title:e_mordor.holder
					target_title = title:e_mordor
				}

				title:e_mordor.holder = {
					random_character_war = {
						limit = {
							using_cb = final_battle_gondor_cb
						}
						save_scope_as = destroy_mordor_war
					}
					every_tributary = {
						scope:destroy_mordor_war = { add_defender = prev }
					}
				}
			}
		}
	}
}

decision_destroy_mordor_AI = {
	sort_order = 100
	title = decision_destroy_mordor
	picture = {
		reference = "gfx/interface/illustrations/decisions/decision_gondor_01.dds"
	}

	decision_group_type = realms_in_exile_major
	
	ai_goal = yes
	ai_potential = {
		always = yes
	}
	ai_will_do = {
		base = 100
	}
	selection_tooltip = decision_destroy_mordor_tooltip
	desc = decision_destroy_mordor_desc
	confirm_text = decision_destroy_mordor_confirm
	
	cooldown = { years = 20 }

	is_shown = {
		is_ai = yes
		#always = no #JUKE NOTE: (temporarily) removing band-aid fix for gondor agression for testing purposes
		#current_year > 7058
		is_ruler = yes
		is_landed = yes
		OR = {
			has_primary_title = title:e_gondor_steward
			has_primary_title = title:e_gondor
			has_primary_title = title:e_reunitedkingdom
		}	
		lotr_has_numenorean_culture_trigger = yes
		exists = title:e_mordor.holder
		title:e_mordor.holder = character:lineofsauron
		NOR = {
			is_target_in_global_variable_list = {
				name = unavailable_unique_decisions
				target = flag:decision_destroy_mordor
			}
			has_title = title:e_mordor
		}
		is_imprisoned = no
		is_available_adult = yes
		is_at_war = no
		NOR = {
			has_truce = title:e_mordor.holder
		}
		custom_description = {
			text = faith_is_evil
			subject = this
			faith_is_evil = no
		}
		# lotr_armies_are_outnumbered = no
	}
	is_valid = {
		completely_controls = title:d_emyn_arnen
		completely_controls = title:d_forithilien
		completely_controls = title:d_harithilien
		completely_controls = title:d_minas_ithil
		completely_controls = title:d_minas_tirith
		completely_controls = title:d_doranorien
		completely_controls = title:k_lebennin
		completely_controls = title:k_belfalas
		
		# can_declare_war = {
		# 	casus_belli = minor_religious_war
		# 	claimant = root
		# 	defender = title:e_mordor.holder
		# }
	}
	effect = {
		custom_tooltip = destroy_mordor_decision
		trigger_event = {
			id = gondor.2100
		}
		add_gold = 700
	}
	# cost = {
	# 	gold = 300
	# }
}

decision_search_orthanc = {
	title = decision_search_orthanc
	picture = {
		reference = "gfx/interface/illustrations/decisions/decision_orthanc.dds"
	}

	decision_group_type = realms_in_exile_major
	
	ai_goal = yes
	ai_potential = {
		always = yes
	}
	ai_will_do = {
		base = 100
	}
		
	desc = decision_search_orthanc_desc
	selection_tooltip = decision_search_orthanc_desc_tooltip
	confirm_text = decision_search_orthanc_confirm
		
	is_shown = {
		current_year >= 7000
		##Quonton
		culture = { 
			OR = { 
				has_cultural_pillar = heritage_dunedain 
				has_cultural_pillar = heritage_unified_adunaic
				has_cultural_tradition = tradition_new_numenor
			}	
		}
		##End Quonton
		is_landed = yes
		OR = {
			is_gondor = yes
			has_primary_title = title:e_arnor
			has_primary_title = title:e_numenor_in_exile
			has_primary_title = title:e_reunitedkingdom
			has_primary_title = title:e_numenor #Submod Numenor
		}
		completely_controls = title:c_isengard
		NOT = {
			is_target_in_global_variable_list = {
				name = unavailable_unique_decisions
				target = flag:decision_search_orthanc
			}
		}
	}
	is_valid = {
		completely_controls = title:c_isengard
	}
	effect = {
		trigger_event = {
			id = gondor.2200
		}
		add_prestige = major_prestige_gain
		add_to_global_variable_list = {
            name = unavailable_unique_decisions
            target = flag:decision_search_orthanc
        }
	}
}

decision_emyn_arnen_capital = {
	sort_order = 85
	title = decision_emyn_arnen_capital
	picture = {
		reference = "gfx/interface/illustrations/decisions/decision_minas_tirith_01.dds"
	}

	decision_group_type = realms_in_exile_major
	
	ai_goal = yes
	ai_potential = {
		always = yes
	}
	ai_will_do = {
		base = 100
	}
	selection_tooltip = decision_emyn_arnen_capital_tooltip
	desc = decision_emyn_arnen_capital_desc
	confirm_text = decision_emyn_arnen_capital_confirm
	is_shown = {
		current_year >= 6035
		OR = {
			has_primary_title = title:e_gondor
			has_primary_title = title:e_castamir
			has_primary_title = title:e_reunitedkingdom
			has_primary_title = title:e_numenor_in_exile
			has_primary_title = title:e_numenor_colonies
			has_primary_title = title:e_numenor #Submod Numenor
			AND = {
				has_primary_title = title:k_ithilien
				dynasty = {
					has_dynasty_modifier = princely_house_of_ithilien
				}
			}
		}
		completely_controls = title:c_emyn_arnen
		completely_controls = title:c_minas_ithil #Trig - Doesn't make sense to show until you own Minas Morgul too. 
		faith_is_good = yes
		##Quonton
		culture = { 
			OR = { 
				has_cultural_pillar = heritage_dunedain 
				has_cultural_tradition = tradition_new_numenor
			}	
		}
		##End Quonton
		NOT = {
			is_target_in_global_variable_list = {
				name = unavailable_unique_decisions
				target = flag:decision_emyn_arnen_capital
			}
		}
	}
	is_valid = {
		is_ruler = yes
		is_landed = yes
		# completely_controls = title:k_ithilien # Shouldn't need cannonically empty lands to take
		completely_controls = title:d_emyn_arnen
		completely_controls = title:d_minas_ithil 
		completely_controls = title:d_harithilien
		completely_controls = title:d_forithilien
	}
	is_valid_showing_failures_only = {
		is_imprisoned = no
		is_available_adult = yes
		is_at_war = no
	}
	cost = {
		gold = 250
	}
	effect = {
		custom_tooltip = decision_move_capital_emyn_arnen
		title:k_ithilien = {
			set_capital_county = title:c_emyn_arnen
		}
		hidden_effect = {
			if = {
				limit = {
					primary_title = title:k_ithilien
					has_title = title:c_emyn_arnen
				}
				set_realm_capital = title:c_emyn_arnen
			}
			else_if = {
				limit = {
					OR = {
						primary_title = title:e_gondor
						primary_title = title:e_gondor_steward
					}
				}
				get_title = title:c_emyn_arnen
			}		
			else_if = {
				limit = {
					title:k_ithilien.holder = {
						liege = root
						has_title = title:c_emyn_arnen
					}
				}
				title:k_ithilien.holder = {
					set_realm_capital = title:c_emyn_arnen
				}
			}
			else_if = {
				limit = {
					title:k_ithilien.holder = {
						liege = ROOT
						NOT = { has_title = title:c_emyn_arnen }
						completely_controls = title:c_emyn_arnen
					}
				}
				title:k_ithilien.holder = {
					get_title = title:c_emyn_arnen 
					set_realm_capital = title:c_emyn_arnen
				}
			}
		}
		province:236 = {
			add_special_building_slot = wonder_palace_of_ithilien
		}
		title:d_emyn_arnen = {
			change_development_level = 2
		}
		title:c_emyn_arnen = {
			change_development_level = 6
		}
		add_to_global_variable_list = {
			name = unavailable_unique_decisions
			target = flag:decision_emyn_arnen_capital
		}
		add_prestige = 500
	}
}

decision_calenardhon_claim = {
	sort_order = 81
	title = decision_calenardhon_claim
	picture = {
		reference = "gfx/interface/illustrations/decisions/decision_edoras_01.dds"
	}

	decision_group_type = realms_in_exile_major
	
	ai_goal = yes
	ai_potential = {
		always = yes
	}
	ai_will_do = {
		base = 100
	}

	selection_tooltip = decision_calenardhon_claim_tooltip
	desc = decision_calenardhon_claim_desc
	confirm_text = decision_calenardhon_claim_confirm
	
	is_shown = {
		current_year >= 6543
		is_ruler = yes
		is_landed = yes
		OR = {
			is_gondor = yes
			has_primary_title = title:e_reunitedkingdom
		}
		
		# OR = {
		# 	has_title = title:e_gondor
		# 	has_title = title:e_gondor_steward
		# 	has_title = title:e_castamir
		# }	
		exists = title:k_rohan.holder
		title:k_rohan.holder ?= {
			NOT = { 
				any_liege_or_above = {
					this = root
				}
			}
		}
		NOR = {
			has_title = title:k_rohan
			is_target_in_global_variable_list = {
				name = unavailable_unique_decisions
				target = flag:decision_calenardhon_claim
			}
			title:k_rohan.holder = {
				OR = {
					AND = {
						culture = culture:rohirrim
						faith_is_evil = no
						is_independent_ruler = yes
					}
					##Quonton
					culture = { 
						OR = { 
							has_cultural_pillar = heritage_dunedain 
							has_cultural_tradition = tradition_new_numenor
						}	
					}
					##End Quonton
					AND = {
						dynasty = dynasty:dynasty_eorl # The House of Eorl still holds Rohan
						faith_is_evil = no
						is_independent_ruler = yes
					}
					AND = {
						exists = global_var:gondor_approves_of_wulf
						global_var:gondor_approves_of_wulf = yes
						faith_is_evil = no
						is_independent_ruler = yes
						OR = {
							dynasty = dynasty:dynasty_eorl
							dynasty = dynasty:dynasty_freca
						}
					}
				}
			}
		}
	}
	
	is_valid_showing_failures_only = {
		is_imprisoned = no
		is_available_adult = yes
		is_at_war = no
		NOT = {
			has_truce = title:k_rohan.holder		
		}
		custom_tooltip = {
			text = is_considering_wulf
			NOT = { has_character_flag = considering_wulf }
		}
	}

	is_valid = {
		is_independent_ruler = yes
		# completely_controls = title:e_gondor
		# prestige_level >= very_high_prestige_level
		OR = {
			is_gondor = yes
			has_primary_title = title:e_reunitedkingdom
		}
		# OR = {
		# 	has_title = title:e_gondor
		# 	has_title = title:e_gondor_steward
		# 	has_title = title:e_castamir
		# }
	}	

	effect = {
		custom_tooltip = press_calenardhon_claim_tooltip
		trigger_event = {
			id = gondor.2400
			days = 1
		}
		add_to_global_variable_list = {
			name = unavailable_unique_decisions
			target = flag:decision_calenardhon_claim
		}
	}
}

# Invite Elves to Edhellond
decision_invite_elves_edhellond = {
	sort_order = 35
	# TEXT + PICTURE
	picture = {
		reference = "gfx/interface/illustrations/decisions/decision_mithlond_02.dds"
	}
	title = decision_invite_elves_edhellond
	selection_tooltip = decision_invite_elves_edhellond_tooltip
	desc = decision_invite_elves_edhellond_desc
	confirm_text = decision_invite_elves_edhellond_confirm

	decision_group_type = realms_in_exile_major
	

	# SHOWN
	is_shown = {
		is_landed = yes
		game_start_date >= 6013
		game_start_date < 7100 #Juke note: by this point, elves were leaving
		
		#faith = faith:faith_edain
		faith.religion = religion:dunedain_religion #juke note: dont bully heretics
		
		# If Anfalas player controlled, apply decision restrictions as normal. If not, allow ruler to land them
		trigger_if = {
			limit = {
				title:c_edhellond.holder = { is_ai = yes }
			}
			title:c_edhellond = { holder.top_liege = root }
		} 
		trigger_else = {
			has_title = title:c_edhellond
		}
		
		NOR = {
			title:c_edhellond = {
				county_is_elven = yes
			}
			is_target_in_global_variable_list = {
				name = unavailable_unique_decisions
				target = flag:invite_elves_edhellond
			}
		}
	}

	# IS_VALID
	is_valid = {
		custom_tooltip = {
			text = LOTR_FRIENDS_WITH_ELVEN_KING_TRIGGER
			any_relation = { 
				type = friend 
				is_ruler = yes
				highest_held_title_tier >= tier_kingdom
				is_elf = yes
				is_in_valinor = no
				is_eldar = yes
			}
		}

		trigger_if = {
			limit = {
				title:c_edhellond.holder = { is_ai = yes }
			}
			prestige_level >= 4
		} 
		trigger_else = {
			prestige_level >= 3
		}

		knows_language = language_sindarin
	}

	is_valid_showing_failures_only = {
		is_imprisoned = no
		is_available_adult = yes
		is_at_war = no
	}

	#COST
	cost = {
		gold = 350
		prestige = 1000
		piety = 750
	}

	# EFFECT
	effect = {
		custom_tooltip = decision_invite_elves_edhellond_effect_tooltip
		
		add_to_global_variable_list = {
			name = unavailable_unique_decisions
			target = flag:invite_elves_edhellond
		}
		trigger_event = {
			id = gondor.2800
			days = { 15 30 }
		}
	}

	# AI
	ai_goal = yes
	ai_potential = {
		always = yes
	}
	ai_will_do = {
		base = 100
	}
}

decision_elevate_edhellond = { # Aragorn decides to elevate Edhellond into a kingdom/sanctuary type thing for the elves
	picture = {
		reference = "gfx/interface/illustrations/event_scenes/armenelos.dds"
	}
	title = decision_elevate_edhellond
	selection_tooltip = decision_elevate_edhellond_tooltip
	desc = decision_elevate_edhellond_desc
	confirm_text = decision_elevate_edhellond_confirm

	decision_group_type = realms_in_exile_major
	

	# COOLDOWN
	cooldown = {
		years = 25 
	}

	# SHOWN
	is_shown = {
		faith_is_evil = no
		is_landed = yes
		exists = title:d_edhellond.holder

		title:c_edhellond = { holder.top_liege = root }
		
		is_target_in_global_variable_list = {
			name = unavailable_unique_decisions
			target = flag:invite_elves_edhellond
		}
		NOT = {
			is_target_in_global_variable_list = {
				name = unavailable_unique_decisions
				target = flag:elves_edhellond_kingdom
			}
		}
	}

	# IS VALID
	is_valid = {
		faith.religion = religion:dunedain_religion #juke note: dont bully heretics
		prestige_level >= 4
		knows_language = language_sindarin
		# title:d_edhellond.holder ?= {
		has_relation_friend = title:d_edhellond.holder
		# }
		custom_tooltip = {
			text = edhellond_controlled_by_elf
			title:d_edhellond.holder = { is_elf = yes }
		}
		
	}

	is_valid_showing_failures_only = {
		is_imprisoned = no
		is_available_adult = yes
		is_at_war = no
	}

	#COST
	cost = {
		prestige = 1250
		gold = 500
		piety = 350
	}

	#EFFECT
	effect = {
		title:d_edhellond.holder ?= {
			trigger_event = {
				id = gondor.2801
				days = { 15 30 }
			}
		}
	}

	# AI
	ai_goal = yes
	ai_potential = {
		always = yes
	}
	ai_will_do = {
		base = 100
	}
}

# Form a semi-permanent alliance with Bellakar, renewable after a ruler dies
decision_gondor_x_bellakar = {
	sort_order = 65
	picture = {
		reference = "gfx/interface/illustrations/decisions/decision_arnor_01.dds"
	}
	title = decision_gondor_x_bellakar
	selection_tooltip = decision_gondor_x_bellakar_tooltip
	desc = decision_gondor_x_bellakar_desc
	confirm_text = decision_gondor_x_bellakar_confirm

	decision_group_type = realms_in_exile_major
	

	# SHOWN
	is_shown = {
		OR = {
			has_title = title:e_gondor
			AND = {
				has_title = title:e_reunitedkingdom
				is_target_in_global_variable_list = {
					name = unavailable_unique_decisions
					target = flag:decision_solidify_reunited_kingdom
				}
			}
		}
		current_year >= 5470
		OR = {
			AND = {
				exists = title:e_bellakar.holder
				in_diplomatic_range = title:e_bellakar.holder
			}
			AND = {
				exists = title:e_pharazain.holder
				in_diplomatic_range = title:e_pharazain.holder
			}
		}
		faith_is_good = yes
		OR = {
			dynasty = dynasty:dynasty_elros
			dynasty = dynasty:dynasty_elendil
			dynasty = dynasty:dynasty_anarion
		}

		NOT = {
			is_target_in_global_variable_list = {
				name = unavailable_unique_decisions
				target = flag:bellakar_x_gondor
			}
			is_target_in_global_variable_list = {
				name = unavailable_unique_decisions
				target = flag:gondor_x_bellakar
			}
		}
		trigger_if = {
			limit = {
				exists = title:e_pharazain.holder
			}
			NOT = {
				is_allied_to = title:e_pharazain.holder
			}
		}
		trigger_else = {
			trigger_if = {
				limit = {
					exists = title:e_bellakar.holder
				}
				NOT = {
					is_allied_to = title:e_bellakar.holder
					has_title = title:e_bellakar
				}
			}
		}
		sauron_is_alive = yes
	}

	# IS VALID
	is_valid = {
		prestige_level >= 4
		sauron_is_alive = yes
		trigger_if = {
			limit = {
				exists = title:e_pharazain.holder
			}
			title:e_pharazain.holder = { faith_is_good = yes }
		}
		trigger_else = {
			title:e_bellakar.holder = { faith_is_good = yes }
		}
		custom_tooltip = {
			text = decision_gondor_x_bellakar_custom_tooltip_a
			is_target_in_global_variable_list = {
				name = unavailable_unique_decisions
				target = flag:reclaim_harondor_decision
			}
		}
		custom_tooltip = {
			text = decision_gondor_x_bellakar_custom_tooltip_b
			is_target_in_global_variable_list = {
				name = unavailable_unique_decisions
				target = flag:reclaim_umbar_decision
			}
		}
	}

	is_valid_showing_failures_only = {
		is_imprisoned = no
		is_available_adult = yes
		is_at_war = no
	}

	#EFFECT
	effect = { # make an alliance between Gondor x Bellakar for next ~150 years or something idk
		play_music_cue = lotr_cue_beacons
		custom_tooltip = decision_gondor_x_bellakar_custom_effect
		add_to_global_variable_list = {
			name = unavailable_unique_decisions
			target = flag:gondor_x_bellakar
		}
		if = {
			limit = {
				exists = title:e_pharazain.holder
			}
			title:e_pharazain.holder = {
				trigger_event = {
					id = gondor.2950
					days = { 15 30 }
				}
			}
		}
		else = {
			title:e_bellakar.holder = {
				trigger_event = {
					id = gondor.2950
					days = { 15 30 }
				}
			}
		}
	}

	# AI
	ai_goal = yes
	ai_potential = {
		always = yes
	}
	ai_will_do = {
		base = 100
	}
}

################################################
### The Reunited Kingdom & Related Decisions ###
################################################
decision_reunited_kingdom = {
	sort_order = 500
	# TEXT
	title = decision_reunited_kingdom
	picture = {
		reference = "gfx/interface/illustrations/decisions/decision_fornost_02.dds"
	}
	selection_tooltip = decision_reunited_kingdom_tooltip
	desc = decision_reunited_kingdom_desc
	confirm_text = decision_reunited_kingdom_confirm

	decision_group_type = realms_in_exile_major
	
	# IS_SHOWN
	is_shown = {
		current_year >= 4035 # Is only shown if bookmark is after the two kingdoms split
		
		OR = {
			has_title = title:e_gondor_steward
			has_title = title:e_gondor
			has_title = title:e_castamir
		}
		has_title = title:e_arnor
		NOT = { has_title = title:e_reunitedkingdom }
		NOT = { exists = title:e_reunitedkingdom.holder }

		##Quonton - So that not Aragorn can use the decision
		#OR = {
		#	dynasty = dynasty:dynasty_elros
		#	dynasty = dynasty:dynasty_elendil
		#	dynasty = dynasty:dynasty_anarion
		#}

		highest_held_title_tier >= tier_empire
		
		# NOT = {
			# is_target_in_global_variable_list = {
				# name = unavailable_unique_decisions
				# target = flag:decision_reunited_kingdom
			# }
		# }
	}
	
	# IS_VALID
	is_valid = {
		prestige_level >= very_high_prestige_level
		
		OR = {
			has_title = title:e_gondor_steward
			has_title = title:e_gondor
			has_title = title:e_castamir
		}
		has_title = title:e_arnor
	}
	is_valid_showing_failures_only = {
		is_imprisoned = no
		is_available_adult = yes
		is_at_war = no
	}
	
	# EFFECT 
	effect = {
		#Create the title and make it primary
		create_title_and_vassal_change = {
			type = created
			save_scope_as = title_change
			add_claim_on_loss = yes
		}
		title:e_reunitedkingdom = {
			change_title_holder = {
				holder = root
				change = scope:title_change
			}
		}
		resolve_title_and_vassal_change = scope:title_change
		set_primary_title_to = title:e_reunitedkingdom

		trigger_event = gondor.3602   # Proclaim the Reunited Kingdom flavour
		
		if = { # Can only gain these rewards once! No farming the decision
			limit = {
				NOT = { has_character_flag = kingdom_reunited }
			}
			add_prestige = major_prestige_gain
			dynasty = { add_dynasty_prestige = 1000 }
			add_character_flag = kingdom_reunited
		}
		
		hidden_effect = {
			title:e_gondor_steward = {
				every_in_de_jure_hierarchy = {
					limit = { tier = tier_kingdom }
					set_de_jure_liege_title = title:e_gondor
				}
			}
			title:e_castamir = {
				every_in_de_jure_hierarchy = {
					limit = { tier = tier_kingdom }
					set_de_jure_liege_title = title:e_gondor
				}
			}
			create_title_and_vassal_change = {
				type = returned
				save_scope_as = change
				add_claim_on_loss = yes
			}
			title:e_gondor = {
				change_title_holder = {
					holder = root
					change = scope:change
				}
			}
			title:e_gondor.holder = {
				every_held_title = {
					add_title_law = male_preference_law # To stop the house of Telcontar from losing the throne immediately if Eldarion dies
				}
			}
			resolve_title_and_vassal_change = scope:change
			destroy_title = title:e_gondor_steward
			destroy_title = title:e_castamir
		}

		# add_to_global_variable_list = {
			# name = unavailable_unique_decisions
			# target = flag:decision_reunited_kingdom
		# }
	}

	# AI
	ai_goal = yes
	ai_potential = { always = yes }
	ai_will_do = { base = 100 }
}

decision_solidify_reunited_kingdom = {
	sort_order = 98
	# TEXT
	title = decision_solidify_reunited_kingdom
	picture = {
		reference = "gfx/interface/illustrations/decisions/decision_fornost_02.dds"
	}
	selection_tooltip = decision_solidify_reunited_kingdom_tooltip
	desc = decision_solidify_reunited_kingdom_desc
	confirm_text = decision_solidify_reunited_kingdom_confirm

	decision_group_type = realms_in_exile_major
	

	# IS_SHOWN
	is_shown = {
		has_title = title:e_reunitedkingdom

		highest_held_title_tier >= tier_empire
		
		NOT = {
			is_target_in_global_variable_list = {
				name = unavailable_unique_decisions
				target = flag:decision_solidify_reunited_kingdom
			}
		}
	}
	
	# IS_VALID
	is_valid = {
		prestige_level >= 5
		trigger_if = {
			limit = { exists = title:e_castamir.holder }
			custom_tooltip = {
				text = control_percentage_of_castamiri_gondor_desc
				title:e_castamir = {
					any_de_jure_county = {
						percent > 0.9
						holder.top_liege = root
					}
				}
			}
		}
		trigger_else = {
			custom_tooltip = {
				text = control_percentage_of_gondor_desc
				title:e_gondor = {
					any_de_jure_county = {
						percent > 0.9
						holder.top_liege = root
					}
				}
			}
		}
		custom_tooltip = {
			text = control_percentage_of_arnor_desc
			title:e_arnor = {
				any_de_jure_county = {
					percent > 0.9
					holder.top_liege = root
				}
			}
		}
		# Add Realm Size requirement
	}
	is_valid_showing_failures_only = {
		is_imprisoned = no
		is_available_adult = yes
		is_at_war = no
	}
	
	# EFFECT 
	effect = {
		hidden_effect = {
			every_realm_de_jure_kingdom = {
				if = {
					limit = {
						OR = {
							empire = title:e_gondor
							empire = title:e_arnor
						}
					}
					set_de_jure_liege_title = title:e_reunitedkingdom
				}
			}
			title:k_isengard = {
				set_de_jure_liege_title = title:e_reunitedkingdom
			}
			title:k_shire = {
				set_de_jure_liege_title = title:e_reunitedkingdom
			}
			title:k_gondor_steward = {
				set_de_jure_liege_title = title:e_reunitedkingdom
			}
			if = {
				limit = {
					is_target_in_global_variable_list = {
						name = unavailable_unique_decisions
						target = flag:decision_integrate_the_northern_provinces
					}
				}
				title:k_angmar = { set_de_jure_liege_title = title:e_reunitedkingdom }
				title:k_forochel = { set_de_jure_liege_title = title:e_reunitedkingdom }
			}
			
			title:e_reunitedkingdom = { set_variable = founded_mundburgian_eored } #The Eored is transferred to the RK
		}
		trigger_event = gondor.3603   # Solidify the Reunited Kingdom flavour

		add_to_global_variable_list = {
			name = unavailable_unique_decisions
			target = flag:decision_solidify_reunited_kingdom
		}
	}

	# AI
	ai_goal = yes
	ai_potential = { always = yes }
	ai_will_do = { base = 100 }
}

decision_reunify_dunedain = {
	sort_order = 97
	# TEXT
	title = decision_reunify_dunedain
	picture = {
		reference = "gfx/interface/illustrations/decisions/decision_fornost_02.dds"
	}
	selection_tooltip = decision_reunify_dunedain_tooltip
	desc = decision_reunify_dunedain_desc
	confirm_text = decision_reunify_dunedain_confirm

	decision_group_type = realms_in_exile_major
	

	# IS_SHOWN
	is_shown = {
		has_title = title:e_reunitedkingdom

		highest_held_title_tier >= tier_empire
		
		is_target_in_global_variable_list = {
			name = unavailable_unique_decisions
			target = flag:decision_solidify_reunited_kingdom
		}
		culture = { has_cultural_pillar = heritage_dunedain }
		NOT = {
			is_target_in_global_variable_list = {
				name = unavailable_unique_decisions
				target = flag:decision_reunify_dunedain
			}
		}
		
		NOT = { 
			OR = {
				this = culture:numenorean
				this = culture:adunaic
				culture = { any_parent_culture_or_above = { this = culture:adunaic } }
			}
		}
	}
	
	# IS_VALID
	is_valid = {
		prestige_level >= 5
		piety_level >= 4
		completely_controls_region = custom_gondorian_heartlands
		completely_controls_region = custom_arnor_minus_shire
	}
	is_valid_showing_failures_only = {
		is_imprisoned = no
		is_available_adult = yes
		is_at_war = no
	}
	
	# EFFECT 
	effect = {
		if = { # Last King of the Elder Days | Achievement
			limit = { 
				is_ai = no
				NOT = { exists = global_var:lotr_achievement_26 }
				realms_achievements_enabled = yes
				root = character:lineisildur42
				age < 151
				is_target_in_global_variable_list = {
					name = unavailable_unique_decisions
					target = flag:decision_destroy_mordor
				}
			}
			set_global_variable = lotr_achievement_26
		}
		##Quonton
		culture:new_dunedain = {
			culture:new_dunedain = { save_temporary_scope_as = dunedain_culture }
			culture:gondorian = { save_temporary_scope_as = gondorian_culture }
			culture:arnorian = { save_temporary_scope_as = arnorian_culture }
			# Needs to be above the 'custom_tooltip'
			custom_tooltip = decision_reunify_dunedain_get_innovations
			hidden_effect = {
				reset_culture_creation_date = yes
				get_all_innovations_from = culture:gondorian
				get_all_innovations_from = culture:arnorian
				get_all_innovations_from = culture:dunedain
				remove_innovation = innovation_arnorian_soldiers
				remove_innovation = innovation_gondorian_soldiers
			}
		}
		trigger_event = gondor.3604   # Restore Dunedain Identity flavour
		
		every_living_character = { 
			custom = decision_reunify_dunedain_characters_custom
			limit = { 
				culture = { has_cultural_pillar = heritage_dunedain }
			}
			set_culture = culture:new_dunedain
		}

		#Flip Counties
		every_county = {
			custom = decision_reunify_dunedain_counties_custom2
			limit = {
				culture = { has_cultural_pillar = heritage_dunedain }
			}
			set_county_culture = culture:new_dunedain
		}

		culture:new_dunedain = {
			add_innovation = innovation_lords_of_the_westlands
			add_innovation = innovation_dunedain_warriors
		}
		add_to_global_variable_list = {
			name = unavailable_unique_decisions
			target = flag:decision_reunify_dunedain
		}
	}

	cost = { 
		piety = { value = 750 }
		prestige = { value = 750 }
		gold = { value = 500 }
	}

	# AI
	ai_goal = yes
	ai_potential = { always = yes }
	ai_will_do = { base = 100 }
}

decision_reunify_numenor_culture = {
	sort_order = 100
	# TEXT
	title = decision_reunify_numenor_culture
	picture = {
		reference = "gfx/interface/illustrations/decisions/decision_fornost_02.dds"
	}
	selection_tooltip = decision_reunify_numenor_culture_tooltip
	desc = decision_reunify_numenor_culture_desc
	confirm_text = decision_reunify_numenor_culture_confirm
	decision_group_type = realms_in_exile_major

	# IS_SHOWN
	is_shown = {
		has_title = title:e_numenor_in_exile

		highest_held_title_tier >= tier_empire
		AND = { 
			lotr_has_numenorean_culture_trigger = yes
			NOT = { culture = { this = culture:bellanarud } }
		}
		
		NOT = {
			is_target_in_global_variable_list = {
				name = unavailable_unique_decisions
				target = flag:decision_reunify_numenor_culture
			}
		}
		
		NOT = { 
			OR = {
				this = culture:numenorean
				this = culture:adunaic
				culture = { any_parent_culture_or_above = { this = culture:adunaic } }
			}
		}
	}
	
	# IS_VALID
	is_valid = {
		prestige_level >= 5
		piety_level >= 5
	#	custom_tooltip = {
	#		text = reached_meneltarma_desc_tooltip
	#		has_character_modifier = reached_meneltarma
	#	}
		trigger_if = { 
			limit = {
				culture:new_dunedain = {
					any_culture_county = { count >1 culture = culture:new_dunedain  }
				}
			}
			culture = { cultural_acceptance = { target = culture:new_dunedain value >= 70 } }
		}
		trigger_if = { 
			limit = { 
				NOT = { 
					culture:new_dunedain = {
						any_culture_county = { count >1 culture = culture:new_dunedain  }
					}
				} 
			}
			culture = { cultural_acceptance = { target = culture:gondorian value >= 70 } }
			OR = { culture = { cultural_acceptance = { target = culture:dunedain_ranger value >= 70 } } culture = { cultural_acceptance = { target = culture:arnorian value >= 70 } } } 
		}
		trigger_if = { 
			limit = {
				culture:pharazaini_culture = {
					any_culture_county = { count >1 culture = culture:pharazaini_culture  }
				}
			}
			culture = { cultural_acceptance = { target = culture:pharazaini_culture value >= 70 } }
		}
		trigger_if = { 
			limit = { 
				NOT = { 
					culture:pharazaini_culture = {
						any_culture_county = { count >1 culture = culture:pharazaini_culture  }
					}
				} 
			}
			trigger_if = { 
				limit = {
					culture:bellakaze = {
						any_culture_county = { count >1 culture = culture:bellakaze  }
					}
				}
				culture = { cultural_acceptance = { target = culture:bellakaze value >= 70 } }
			}
			trigger_else = { always = yes }
			trigger_if = { 
				limit = {
					culture:umbarean = {
						any_culture_county = { count >1 culture = culture:umbarean  }
					}
				}
				culture = { cultural_acceptance = { target = culture:umbarean value >= 70 } }
			}
			trigger_else = { always = yes }
			
			trigger_if = { 
				limit = {
					culture:anbalukkhori = {
						any_culture_county = { count >1 culture = culture:anbalukkhori  }
					}
				}
				culture = { cultural_acceptance = { target = culture:anbalukkhori value >= 70 } }
			}
			trigger_else = { always = yes }
			trigger_if = { 
				limit = {
					culture:kharadunaim = {
						any_culture_county = { count >1 culture = culture:kharadunaim  }
					}
				}
				culture = { cultural_acceptance = { target = culture:kharadunaim value >= 70 } }
			}
			trigger_else = { always = yes }
		}
		completely_controls_region = custom_colonial_minhiriath
		completely_controls_region = custom_gondorian_heartlands
		completely_controls_region = middleearth_harad_near_umbar
		completely_controls_region = middleearth_harad_far_bellakar
		completely_controls_region = custom_anbalkumagan
		completely_controls_region = custom_colonial_thani_hazad
	}
	is_valid_showing_failures_only = {
		is_imprisoned = no
		is_available_adult = yes
		is_at_war = no
	}

	# EFFECT 
	effect = {
		if = { 
			limit = { culture = { has_cultural_pillar = heritage_dunedain } } 
			culture:new_numenorean = {
				culture:new_numenorean = { save_temporary_scope_as = new_numenorean_culture }
				culture:gondorian = { save_temporary_scope_as = gondorian_culture }
				culture:arnorian = { save_temporary_scope_as = arnorian_culture }
				culture:new_dunedain = { save_temporary_scope_as = dunedain_culture }
				culture:anbalukkhori = { save_temporary_scope_as = anbalukkhori_culture }
				culture:black_numenorean = { save_temporary_scope_as = black_numenorean_culture }
				culture:umbarean = { save_temporary_scope_as = umbarean_culture }
				culture:felayan = { save_temporary_scope_as = felayan_culture }
				culture:bellakarani = { save_temporary_scope_as = bellakarani_culture }
				culture:bellakaze = { save_temporary_scope_as = bellakaze_culture }
				culture:mardrukan = { save_temporary_scope_as = mardrukan_culture }
				culture:numenorean  = { save_temporary_scope_as = numenorean_culture }
				culture:kharadunaim  = { save_temporary_scope_as = kharadunaim_culture }
				culture:pharazaini_culture  = { save_temporary_scope_as = pharazaini_culture_culture }
				# Needs to be above the 'custom_tooltip'
				custom_tooltip = decision_reunify_numenor_culture_get_innovations
				hidden_effect = {
					reset_culture_creation_date = yes
					get_all_innovations_from = culture:gondorian
					get_all_innovations_from = culture:arnorian
					get_all_innovations_from = culture:new_dunedain
					get_all_innovations_from = culture:black_numenorean
					get_all_innovations_from = culture:umbarean
					get_all_innovations_from = culture:mardrukan
					get_all_innovations_from = culture:felayan
					get_all_innovations_from = culture:bellakarani
					get_all_innovations_from = culture:bellakaze
					get_all_innovations_from = culture:anbalukkhori
					get_all_innovations_from = culture:dunedain
					get_all_innovations_from = culture:numenorean 
					get_all_innovations_from = culture:kharadunaim 
					get_all_innovations_from = culture:pharazaini_culture
					culture:new_numenorean = {
						add_innovation = innovation_lords_of_the_westlands
						add_innovation = innovation_lords_of_the_golden_lands
						add_innovation = innovation_numenorean_warriors_custom
						remove_innovation = innovation_numenorean_warriors
						remove_innovation = innovation_varangian_adventurers
						remove_innovation = innovation_lesser_numenorean_heritage
						remove_innovation = innovation_unified_adunai_warfare
						remove_innovation = innovation_dunedain_warriors
						remove_innovation = innovation_arnorian_soldiers
						remove_innovation = innovation_gondorian_soldiers
						remove_innovation = innovation_dunedain_ranger_warfare
						remove_innovation = innovation_northern_adunai_warfare
						remove_innovation = innovation_southern_adunai_warfare
						remove_innovation = innovation_knights_of_kharadune_warfare
						remove_innovation = innovation_conscripts_warfare
					}
				}
			}
			trigger_event = numenor_identity.1 # Restore Numenor Identity flavour

			set_culture = culture:new_numenorean
			custom_tooltip = decision_reunify_numenor_culture_vassals_custom
			custom_tooltip = decision_gain_numenor_blood_culture_self
			custom_tooltip = decision_gain_numenor_blood_culture
			hidden_effect = {		
				if = { 
					limit = { has_trait = blood_of_numenor_10 }	
					add_piety = 1000
				}
				else_if = { 
					limit = { has_trait = blood_of_numenor_9 }	
					remove_trait = blood_of_numenor_9
					add_trait = blood_of_numenor_10
				}
				else_if = { 
					limit = { has_trait = blood_of_numenor_8 }	
					remove_trait = blood_of_numenor_8
					add_trait = blood_of_numenor_10
				}
				else_if = { 
					limit = { has_trait = blood_of_numenor_7 }	
					remove_trait = blood_of_numenor_7
					add_trait = blood_of_numenor_10
				}
				else_if = { 
					limit = { has_trait = blood_of_numenor_6 }	
					remove_trait = blood_of_numenor_6
					add_trait = blood_of_numenor_10
				}
				else_if = { 
					limit = { has_trait = blood_of_numenor_5 }	
					remove_trait = blood_of_numenor_5
					add_trait = blood_of_numenor_10
				}
				else_if = { 
					limit = { has_trait = blood_of_numenor_4 }	
					remove_trait = blood_of_numenor_4
					add_trait = blood_of_numenor_10
				}
				else_if = { 
					limit = { has_trait = blood_of_numenor_3 }	
					remove_trait = blood_of_numenor_3
					add_trait = blood_of_numenor_10
				}
				else_if = { 
					limit = { has_trait = blood_of_numenor_2 }	
					remove_trait = blood_of_numenor_2
					add_trait = blood_of_numenor_10
				}
				else_if = { 
					limit = { has_trait = blood_of_numenor_1 }	
					remove_trait = blood_of_numenor_1
					add_trait = blood_of_numenor_10
				}
				else = { 
					add_trait = blood_of_numenor_10
				}
				every_living_character = { 
					limit = { 
						OR = { 
							culture = { has_cultural_pillar = heritage_dunedain }
							AND = { 
								culture = { has_cultural_pillar = heritage_bellakari }
								NOT = { culture = { this = culture:bellanarud } }
							}
							culture = { has_cultural_pillar = heritage_northern_adunaic }
							culture = { has_cultural_pillar = heritage_southern_adunaic }
							culture = { has_cultural_pillar = heritage_unified_adunaic }
						}
					}
					set_culture = culture:new_numenorean
					if = { 
						limit = { has_trait = blood_of_numenor_10 }	
						add_piety = 1000
					}
					else_if = { 
						limit = { has_trait = blood_of_numenor_9 }	
						remove_trait = blood_of_numenor_9
						add_trait = blood_of_numenor_10
					}
					else_if = { 
						limit = { has_trait = blood_of_numenor_8 }	
						remove_trait = blood_of_numenor_8
						add_trait = blood_of_numenor_10
					}
					else_if = { 
						limit = { has_trait = blood_of_numenor_7 }	
						remove_trait = blood_of_numenor_7
						add_trait = blood_of_numenor_10
					}
					else_if = { 
						limit = { has_trait = blood_of_numenor_6 }	
						remove_trait = blood_of_numenor_6
						add_trait = blood_of_numenor_10
					}
					else_if = { 
						limit = { has_trait = blood_of_numenor_5 }	
						remove_trait = blood_of_numenor_5
						add_trait = blood_of_numenor_9
					}
					else_if = { 
						limit = { has_trait = blood_of_numenor_4 }	
						remove_trait = blood_of_numenor_4
						add_trait = blood_of_numenor_8
					}
					else_if = { 
						limit = { has_trait = blood_of_numenor_3 }	
						remove_trait = blood_of_numenor_3
						add_trait = blood_of_numenor_7
					}
					else_if = { 
						limit = { has_trait = blood_of_numenor_2 }	
						remove_trait = blood_of_numenor_2
						add_trait = blood_of_numenor_6
					}
					else_if = { 
						limit = { has_trait = blood_of_numenor_1 }	
						remove_trait = blood_of_numenor_1
						add_trait = blood_of_numenor_5
					}
					else = { 
						add_trait = blood_of_numenor_4
					}
				}
			}

			#Flip Counties
			every_county = {
				custom = decision_reunify_numenor_culture_counties_custom
				limit = {
					OR = { 
						culture = { has_cultural_pillar = heritage_dunedain }
						AND = { 
							culture = { has_cultural_pillar = heritage_bellakari }
							NOT = { culture = { this = culture:bellanarud } }
						}
						culture = { has_cultural_pillar = heritage_northern_adunaic }
						culture = { has_cultural_pillar = heritage_southern_adunaic }
						culture = { has_cultural_pillar = heritage_unified_adunaic }
					}
				}
				set_county_culture = culture:new_numenorean
			}
			add_to_global_variable_list = {
				name = unavailable_unique_decisions
				target = flag:decision_reunify_numenor_culture
			}
		}
		else = { 
			culture:new_numenorean_adunaic = {
				culture:new_numenorean_adunaic = { save_temporary_scope_as = new_numenorean_adunaic_culture }
				culture:gondorian = { save_temporary_scope_as = gondorian_culture }
				culture:arnorian = { save_temporary_scope_as = arnorian_culture }
				culture:new_dunedain = { save_temporary_scope_as = dunedain_culture }
				culture:anbalukkhori = { save_temporary_scope_as = anbalukkhori_culture }
				culture:black_numenorean = { save_temporary_scope_as = black_numenorean_culture }
				culture:umbarean = { save_temporary_scope_as = umbarean_culture }
				culture:felayan = { save_temporary_scope_as = felayan_culture }
				culture:bellakarani = { save_temporary_scope_as = bellakarani_culture }
				culture:bellakaze = { save_temporary_scope_as = bellakaze_culture }
				culture:mardrukan = { save_temporary_scope_as = mardrukan_culture }
				culture:numenorean  = { save_temporary_scope_as = numenorean_culture }
				culture:kharadunaim  = { save_temporary_scope_as = kharadunaim_culture }
				culture:pharazaini_culture  = { save_temporary_scope_as = pharazaini_culture_culture }
				# Needs to be above the 'custom_tooltip'
				custom_tooltip = decision_reunify_numenor_culture_adunaic_get_innovations
				hidden_effect = {
					reset_culture_creation_date = yes
					get_all_innovations_from = culture:gondorian
					get_all_innovations_from = culture:arnorian
					get_all_innovations_from = culture:new_dunedain
					get_all_innovations_from = culture:black_numenorean
					get_all_innovations_from = culture:umbarean
					get_all_innovations_from = culture:mardrukan
					get_all_innovations_from = culture:felayan
					get_all_innovations_from = culture:bellakarani
					get_all_innovations_from = culture:bellakaze
					get_all_innovations_from = culture:anbalukkhori
					get_all_innovations_from = culture:dunedain
					get_all_innovations_from = culture:numenorean 
					get_all_innovations_from = culture:kharadunaim 
					get_all_innovations_from = culture:pharazaini_culture
					culture:new_numenorean_adunaic = {
						add_innovation = innovation_lords_of_the_westlands
						add_innovation = innovation_lords_of_the_golden_lands
						add_innovation = innovation_numenorean_warriors_adunaic
						remove_innovation = innovation_lesser_numenorean_heritage
						remove_innovation = innovation_varangian_adventurers
						remove_innovation = innovation_numenorean_warriors
						remove_innovation = innovation_unified_adunai_warfare
						remove_innovation = innovation_dunedain_warriors
						remove_innovation = innovation_arnorian_soldiers
						remove_innovation = innovation_gondorian_soldiers
						remove_innovation = innovation_dunedain_ranger_warfare
						remove_innovation = innovation_northern_adunai_warfare
						remove_innovation = innovation_southern_adunai_warfare
						remove_innovation = innovation_knights_of_kharadune_warfare
						remove_innovation = innovation_conscripts_warfare
					}
				}
			}
			trigger_event = numenor_identity.2 # Restore Numenor Identity flavour

			set_culture = culture:new_numenorean_adunaic
			custom_tooltip = decision_reunify_numenor_culture_vassals_custom_a
			custom_tooltip = decision_gain_numenor_blood_culture_self
			custom_tooltip = decision_gain_numenor_blood_culture
			hidden_effect = {		
				if = { 
					limit = { has_trait = blood_of_numenor_10 }	
					add_piety = 1000
				}
				else_if = { 
					limit = { has_trait = blood_of_numenor_9 }	
					remove_trait = blood_of_numenor_9
					add_trait = blood_of_numenor_10
				}
				else_if = { 
					limit = { has_trait = blood_of_numenor_8 }	
					remove_trait = blood_of_numenor_8
					add_trait = blood_of_numenor_10
				}
				else_if = { 
					limit = { has_trait = blood_of_numenor_7 }	
					remove_trait = blood_of_numenor_7
					add_trait = blood_of_numenor_10
				}
				else_if = { 
					limit = { has_trait = blood_of_numenor_6 }	
					remove_trait = blood_of_numenor_6
					add_trait = blood_of_numenor_10
				}
				else_if = { 
					limit = { has_trait = blood_of_numenor_5 }	
					remove_trait = blood_of_numenor_5
					add_trait = blood_of_numenor_10
				}
				else_if = { 
					limit = { has_trait = blood_of_numenor_4 }	
					remove_trait = blood_of_numenor_4
					add_trait = blood_of_numenor_10
				}
				else_if = { 
					limit = { has_trait = blood_of_numenor_3 }	
					remove_trait = blood_of_numenor_3
					add_trait = blood_of_numenor_10
				}
				else_if = { 
					limit = { has_trait = blood_of_numenor_2 }	
					remove_trait = blood_of_numenor_2
					add_trait = blood_of_numenor_10
				}
				else_if = { 
					limit = { has_trait = blood_of_numenor_1 }	
					remove_trait = blood_of_numenor_1
					add_trait = blood_of_numenor_10
				}
				else = { 
					add_trait = blood_of_numenor_10
				}
				every_living_character = { 
					limit = { 
						OR = { 
							culture = { has_cultural_pillar = heritage_dunedain }
							AND = { 
								culture = { has_cultural_pillar = heritage_bellakari }
								NOT = { culture = { this = culture:bellanarud } }
							}
							culture = { has_cultural_pillar = heritage_northern_adunaic }
							culture = { has_cultural_pillar = heritage_southern_adunaic }
							culture = { has_cultural_pillar = heritage_unified_adunaic }
						}
					}
					set_culture = culture:new_numenorean_adunaic
					if = { 
						limit = { has_trait = blood_of_numenor_10 }	
						add_piety = 1000
					}
					else_if = { 
						limit = { has_trait = blood_of_numenor_9 }	
						remove_trait = blood_of_numenor_9
						add_trait = blood_of_numenor_10
					}
					else_if = { 
						limit = { has_trait = blood_of_numenor_8 }	
						remove_trait = blood_of_numenor_8
						add_trait = blood_of_numenor_10
					}
					else_if = { 
						limit = { has_trait = blood_of_numenor_7 }	
						remove_trait = blood_of_numenor_7
						add_trait = blood_of_numenor_10
					}
					else_if = { 
						limit = { has_trait = blood_of_numenor_6 }	
						remove_trait = blood_of_numenor_6
						add_trait = blood_of_numenor_10
					}
					else_if = { 
						limit = { has_trait = blood_of_numenor_5 }	
						remove_trait = blood_of_numenor_5
						add_trait = blood_of_numenor_9
					}
					else_if = { 
						limit = { has_trait = blood_of_numenor_4 }	
						remove_trait = blood_of_numenor_4
						add_trait = blood_of_numenor_8
					}
					else_if = { 
						limit = { has_trait = blood_of_numenor_3 }	
						remove_trait = blood_of_numenor_3
						add_trait = blood_of_numenor_7
					}
					else_if = { 
						limit = { has_trait = blood_of_numenor_2 }	
						remove_trait = blood_of_numenor_2
						add_trait = blood_of_numenor_6
					}
					else_if = { 
						limit = { has_trait = blood_of_numenor_1 }	
						remove_trait = blood_of_numenor_1
						add_trait = blood_of_numenor_5
					}
					else = { 
						add_trait = blood_of_numenor_4
					}
				}
			}

			#Flip Counties
			every_county = {
				custom = decision_reunify_numenor_culture_counties_custom_a
				limit = {
					OR = { 
						culture = { has_cultural_pillar = heritage_dunedain }
						AND = { 
							culture = { has_cultural_pillar = heritage_bellakari }
							NOT = { culture = { this = culture:bellanarud } }
						}
						culture = { has_cultural_pillar = heritage_northern_adunaic }
						culture = { has_cultural_pillar = heritage_southern_adunaic }
						culture = { has_cultural_pillar = heritage_unified_adunaic }
					}
				}
				set_county_culture = culture:new_numenorean_adunaic
			}
			add_to_global_variable_list = {
				name = unavailable_unique_decisions
				target = flag:decision_reunify_numenor_culture
			}
		}
	}

	cost = { 
		piety = { value = 2500 }
		prestige = { value = 1750 }
		gold = { value = 1500 }
	}

	# AI
	ai_goal = yes
	ai_potential = { always = yes }
	ai_will_do = { base = 100 }
}


renovate_special_building_arminalethor = {
	picture = {
		reference = "gfx/interface/illustrations/decisions/decision_armenelos.dds"
	}

	title = renovate_special_building_arminalethor
	desc = renovate_special_building_arminalethor_desc
	selection_tooltip = renovate_special_building_arminalethor_tooltip
	confirm_text = renovate_special_building_arminalethor_confirm
	decision_group_type = realms_in_exile_major

	is_shown = {
		has_title = title:e_numenor_in_exile
		has_title = title:c_tol_uialgaer

		highest_held_title_tier >= tier_empire
		AND = { 
			lotr_has_numenorean_culture_trigger = yes
			NOT = { culture = { this = culture:bellanarud } }
		}
		
		NOT = {
			is_target_in_global_variable_list = {
				name = unavailable_unique_decisions
				target = flag:decision_renovate_special_building_arminalethor
			}
		}
		NOT = { 
			OR = { 
				religion = { is_in_family = rf_forcesofevil }
				religion = { is_in_family = rf_darkness }
			}
		}
	}

	is_valid = {
		completely_controls = title:c_tol_uialgaer
		province:1018 = {
			building_requirement_castle_city_church = { LEVEL = 02 }
		}
		gold >= 15000
		prestige_level >= 5
		lotr_has_numenorean_culture_trigger = yes 
		culture = {
			has_innovation = innovation_hoardings
		}
	}

	effect = {
		custom_tooltip = renovate_special_building_arminalethor_effect_message
		trigger_event = { id = lotr_anonarmenlos.1 }
		
		add_to_global_variable_list = {
			name = unavailable_unique_decisions
			target = flag:decision_renovate_special_building_arminalethor
		}
	}

	ai_goal = yes
	ai_potential = {
		always = yes
	}

	ai_will_do = {
		base = 80
		modifier = {
			add = -50
			gold <= 500
		}
		modifier = {
			factor = 2
			has_trait = zealous
		}
		modifier = {
			factor = 2
			has_trait = arrogant
		}
		modifier = {
			add = 50
			has_trait = greedy
		}
		modifier = {
			factor = 3
			is_head_of_faith = yes
		}
		ai_value_modifier = {
			ai_zeal = 1
			ai_greed = 1
		}
	}
}

##End Quonton

decision_reclaim_royal_lineage = {
	sort_order = 200
	desc = decision_reclaim_royal_lineage_desc
	picture = {
		reference = "gfx/interface/illustrations/decisions/decision_minas_tirith_02.dds"
	}

	decision_group_type = realms_in_exile_major
	
	selection_tooltip = decision_reclaim_royal_lineage_tooltip
	confirm_text = decision_reclaim_royal_lineage_confirm
	
	is_shown = {
		is_landed = yes
		faith_is_good = yes
		OR = { # Ensures at least one option is still available
			dynasty = dynasty:dynasty_aranbor
			dynasty = dynasty:dynasty_silivnir
		}
	}
	
	is_valid = {
		##Quonton
		OR = { 
			culture = { has_cultural_pillar = heritage_dunedain }
			culture = { has_cultural_tradition = tradition_new_numenor }
		}
		##End Quonton
		faith.religion = religion:dunedain_religion
		prestige_level >= 5
		OR = {
			has_title = title:e_arnor
			has_title = title:e_reunitedkingdom
			has_title = title:e_numenor_in_exile
		}
		trigger_if = {
			limit = { 
				has_dlc_feature = legends
				is_ai = no
			}
			custom_tooltip = {
				text = finished_isildur_legend_tt
				house = { has_house_modifier = heirs_of_isildur_modifier }
			}
		}
		trigger_else = {
			legitimacy_level = 5
		}
	}
	
	is_valid_showing_failures_only = {
		is_imprisoned = no
		is_available_adult = yes
		is_at_war = no
		is_independent_ruler = yes
	}
	
	effect = {
		play_music_cue = lotr_cue_gondor
		if = {		# Aranbor
			limit = {
				dynasty = dynasty:dynasty_aranbor
			}
			custom_tooltip = reclaim_royal_lineage_aranbor_tooltip
			dynasty:dynasty_aranbor = { save_scope_as = cadet_dynasty }
			character:lineofaranbor2 = { save_scope_as = royal_ancestor }
		}
		else_if = {		# Silivnir
			limit = {
				dynasty = dynasty:dynasty_silivnir
			}
			custom_tooltip = reclaim_royal_lineage_silivnir_tooltip
			dynasty:dynasty_silivnir = { save_scope_as = cadet_dynasty }
			character:lineofsilivnir1 = { save_scope_as = royal_ancestor }
		}
		trigger_event = gondor.9998 #Effect inside event, avoid lag when decision is opened
		
		add_unpressed_claim = title:c_minas_tirith.empire
	}
	
	cost = {
		gold = {
			if = {
				limit = {
					is_ai = no
				}
				value = 2000
			}
			else = {
				value = 1
			}
		}
		prestige = {
			if = {
				limit = {
					is_ai = no
				}
				value = 1000
			}
			else = {
				value = 1
			}
		}
	}
	
	ai_goal = yes
	
	ai_potential = {
		always = yes
	}
	ai_will_do = {
		base = 1000
	}
}

decision_reclaim_anarion_lineage = {
	sort_order = 200
	desc = decision_reclaim_royal_lineage_desc
	picture = {
		reference = "gfx/interface/illustrations/decisions/decision_minas_tirith_02.dds"
	}

	decision_group_type = realms_in_exile_major
	
	selection_tooltip = decision_reclaim_royal_lineage_tooltip
	confirm_text = decision_reclaim_royal_lineage_confirm
	
	is_shown = {
		is_landed = yes
		is_gondor = yes
		faith_is_good = yes
		OR = { # Ensures at least one option is still available
			dynasty = dynasty:dynasty_benrodir
		}
	}
	
	is_valid = {
		##Quonton
		OR = { 
			culture = { has_cultural_pillar = heritage_dunedain }
			culture = { has_cultural_tradition = tradition_new_numenor }
		}
		##End Quonton
		faith.religion = religion:dunedain_religion
		prestige_level >= 5
		OR = {
			has_title = title:e_gondor
			has_title = title:e_reunitedkingdom
			has_title = title:e_numenor_in_exile
		}
		trigger_if = {
			limit = { 
				has_dlc_feature = legends
				is_ai = no
			}
			custom_tooltip = {
				text = finished_anarion_legend_tt
				house = { has_house_modifier = heirs_of_anarion_modifier }
			}
		}
		trigger_else = {
			legitimacy_level = 5
		}
	}
	
	is_valid_showing_failures_only = {
		is_imprisoned = no
		is_available_adult = yes
		is_at_war = no
		is_independent_ruler = yes
	}
	
	effect = {
		play_music_cue = lotr_cue_gondor
		if = {		# Benrodir
			limit = {
				dynasty = dynasty:dynasty_benrodir
			}
			custom_tooltip = {
				text = reclaim_royal_lineage_benrodir_tooltip
				character:linebenrodir1 = {
					set_house = house:house_benrodir
					save_scope_as = royal_ancestor
				}
			}
			dynasty:dynasty_benrodir = { save_scope_as = cadet_dynasty }
			show_as_tooltip = {
				set_house = house:house_benrodir
			}
			hidden_effect = {
				reclaim_royal_lineage_effect = yes
			}
		}
	}
	
	cost = {
		gold = {
			if = {
				limit = {
					is_ai = no
				}
				value = 2000
			}
			else = {
				value = 1
			}
		}
		prestige = {
			if = {
				limit = {
					is_ai = no
				}
				value = 1000
			}
			else = {
				value = 1
			}
		}
	}
	
	ai_goal = yes
	
	ai_potential = {
		always = yes
	}
	ai_will_do = {
		base = 1000
	}
}

## Numenor in Exile ##
decision_numenor_in_exile = {
	sort_order = 100
	title = decision_numenor_in_exile
	picture = {
		reference = "gfx/interface/illustrations/decisions/decision_aragorn_01.dds"
	}

	decision_group_type = realms_in_exile_major
	
	ai_goal = yes
	ai_potential = {
		always = yes
	}
	ai_will_do = {
		base = 100
	}
	selection_tooltip = decision_numenor_in_exile_tooltip
	desc = decision_numenor_in_exile_desc
	confirm_text = decision_numenor_in_exile_confirm
	is_shown = {
		NOT = { has_title = title:e_numenor } #Numenor Submod
		##Quonton
		OR = { 
			is_target_in_global_variable_list = {
				name = unavailable_unique_decisions
				target = flag:decision_solidify_pharazain
			}	
			is_target_in_global_variable_list = {
				name = unavailable_unique_decisions
				target = flag:decision_solidify_reunited_kingdom
			}			
		}
		##End Quonton
		lotr_has_numenorean_culture_trigger = yes # Only a Numenorean culture can claim the mantle of successor to Numenor!
		highest_held_title_tier >= tier_empire # Only an imperial rank can hope to claim the mantle of successor to Numenor!
		OR = { # Compromise solution
			# Either own half of the entire region of NIE
			any_county_in_region = {
				region = special_nie
				OR = {
					holder = { is_vassal_or_below_of = root }
					holder = root
				}
				percent >= 0.5
			}
			# Or control six of these key locations
			calc_true_if = { # Important colonial cities
				amount >= 6
				completely_controls = title:c_tharbad
				completely_controls = title:c_lond_galen
				completely_controls = title:c_dol_amroth
				completely_controls = title:c_osgiliath
				completely_controls = title:c_pelargir
				completely_controls = title:c_umbar
				completely_controls = title:c_nykkea
				completely_controls = title:c_hazaj_tollin
				completely_controls = title:c_nilulonde
				completely_controls = title:c_korlea
				completely_controls = title:c_tariketh_an_kharat
				completely_controls = title:c_inzilloni
				completely_controls = title:c_uruloni
				completely_controls = title:c_mispir
			}
		}


		NOT = {
			is_target_in_global_variable_list = {
				name = unavailable_unique_decisions
				target = flag:decision_numenor_in_exile
			}
		}
	}
	
	is_valid = {
		prestige_level >= very_high_prestige_level
		legitimacy_level >= 4
		#completely_controls_region = custom_colonial_minhiriath
		#completely_controls_region = custom_gondorian_heartlands
		#completely_controls_region = middleearth_harad_near_umbar
		#completely_controls_region = middleearth_harad_far_bellakar
		#completely_controls_region = custom_anbalkumagan
		#completely_controls_region = custom_colonial_thani_hazad
		
		#completely_controls_region = special_nie

		#custom_tooltip = {
		#	text = control_of_nie_desc
		#	any_county_in_region = {
		#		region = special_nie
		#		OR = {
		#			holder = { is_vassal_or_below_of = root }
		#			holder = root
		#		}
		#		percent >= 0.90
		#	}
		#}

		# We require you to control a certain amount in these regions
		custom_tooltip = {
			text = control_of_colonial_minhiriath_desc
			any_county_in_region = {
				region = custom_colonial_minhiriath
				OR = {
					holder = { is_vassal_or_below_of = root }
					holder = root
				}
				percent >= 0.90
			}
		}
		custom_tooltip = {
			text = control_of_gondorian_heartlands_desc
			any_county_in_region = {
				region = custom_gondorian_heartlands
				OR = {
					holder = { is_vassal_or_below_of = root }
					holder = root
				}
				percent >= 0.90
			}
		}
		custom_tooltip = {
			text = control_of_umbar_desc
			any_county_in_region = {
				region = middleearth_harad_near_umbar
				OR = {
					holder = { is_vassal_or_below_of = root }
					holder = root
				}
				percent >= 0.90
			}
		}
		custom_tooltip = {
			text = control_of_bellakar_desc
			any_county_in_region = {
				region = middleearth_harad_far_bellakar
				OR = {
					holder = { is_vassal_or_below_of = root }
					holder = root
				}
				percent >= 0.90
			}
		}
		custom_tooltip = {
			text = control_of_anbalkumagan_desc
			any_county_in_region = {
				region = custom_anbalkumagan
				OR = {
					holder = { is_vassal_or_below_of = root }
					holder = root
				}
				percent >= 0.90
			}
		}
		custom_tooltip = {
			text = control_of_colonial_thani_hazad_desc
			any_county_in_region = {
				region = custom_colonial_thani_hazad
				OR = {
					holder = { is_vassal_or_below_of = root }
					holder = root
				}
				percent >= 0.90
			}
		}
	}
	is_valid_showing_failures_only = {
		is_imprisoned = no
		is_available_adult = yes
		is_at_war = no
	}
	cost = {
		gold = 1000
	}
	effect = {
		show_as_tooltip = { # Actually fires in the event
			create_numenor_in_exile_effect = yes
		}
		
		##Quonton
		add_character_modifier = custom_add_cultural_acceptance_gain_for_nie
		custom_tooltip = decision_gain_numenorean_soldiers_innovations
		hidden_effect = {
			if = { 
				limit = { culture = { has_cultural_pillar = heritage_dunedain } } 
				root.culture = {
					add_innovation = innovation_numenorean_warriors_custom
					remove_innovation = innovation_numenorean_warriors
					remove_innovation = innovation_dunedain_warriors
					remove_innovation = innovation_arnorian_soldiers
					remove_innovation = innovation_gondorian_soldiers
					remove_innovation = innovation_dunedain_ranger_warfare
				}
			}
			else = { 
				root.culture = {
					add_innovation = innovation_numenorean_warriors_adunaic
					remove_innovation = innovation_numenorean_warriors
					remove_innovation = innovation_unified_adunai_warfare
					remove_innovation = innovation_northern_adunai_warfare
					remove_innovation = innovation_southern_adunai_warfare
					remove_innovation = innovation_knights_of_kharadune_warfare
					remove_innovation = innovation_conscripts_warfare
				}
			}
		}
		custom_tooltip = decision_gain_numenor_blood_culture_self_family
		hidden_effect = {
			if = { 
				limit = { has_trait = blood_of_numenor_10 }	
				add_piety = 1000
			}
			else_if = { 
				limit = { has_trait = blood_of_numenor_9 }	
				remove_trait = blood_of_numenor_9
				add_trait = blood_of_numenor_10
			}
			else_if = { 
				limit = { has_trait = blood_of_numenor_8 }	
				remove_trait = blood_of_numenor_8
				add_trait = blood_of_numenor_9
			}
			else_if = { 
				limit = { has_trait = blood_of_numenor_7 }	
				remove_trait = blood_of_numenor_7
				add_trait = blood_of_numenor_8
			}
			else_if = { 
				limit = { has_trait = blood_of_numenor_6 }	
				remove_trait = blood_of_numenor_6
				add_trait = blood_of_numenor_7
			}
			else_if = { 
				limit = { has_trait = blood_of_numenor_5 }	
				remove_trait = blood_of_numenor_5
				add_trait = blood_of_numenor_6
			}
			else_if = { 
				limit = { has_trait = blood_of_numenor_4 }	
				remove_trait = blood_of_numenor_4
				add_trait = blood_of_numenor_5
			}
			else_if = { 
				limit = { has_trait = blood_of_numenor_3 }	
				remove_trait = blood_of_numenor_3
				add_trait = blood_of_numenor_4
			}
			else_if = { 
				limit = { has_trait = blood_of_numenor_2 }	
				remove_trait = blood_of_numenor_2
				add_trait = blood_of_numenor_3
			}
			else_if = { 
				limit = { has_trait = blood_of_numenor_1 }	
				remove_trait = blood_of_numenor_1
				add_trait = blood_of_numenor_2
			}
			else = { 
				add_trait = blood_of_numenor_1
			}
			every_spouse = {
				if = { 
					limit = { has_trait = blood_of_numenor_10 }	
					add_piety = 1000
				}
				else_if = { 
					limit = { has_trait = blood_of_numenor_9 }	
					remove_trait = blood_of_numenor_9
					add_trait = blood_of_numenor_10
				}
				else_if = { 
					limit = { has_trait = blood_of_numenor_8 }	
					remove_trait = blood_of_numenor_8
					add_trait = blood_of_numenor_9
				}
				else_if = { 
					limit = { has_trait = blood_of_numenor_7 }	
					remove_trait = blood_of_numenor_7
					add_trait = blood_of_numenor_8
				}
				else_if = { 
					limit = { has_trait = blood_of_numenor_6 }	
					remove_trait = blood_of_numenor_6
					add_trait = blood_of_numenor_7
				}
				else_if = { 
					limit = { has_trait = blood_of_numenor_5 }	
					remove_trait = blood_of_numenor_5
					add_trait = blood_of_numenor_6
				}
				else_if = { 
					limit = { has_trait = blood_of_numenor_4 }	
					remove_trait = blood_of_numenor_4
					add_trait = blood_of_numenor_5
				}
				else_if = { 
					limit = { has_trait = blood_of_numenor_3 }	
					remove_trait = blood_of_numenor_3
					add_trait = blood_of_numenor_4
				}
				else_if = { 
					limit = { has_trait = blood_of_numenor_2 }	
					remove_trait = blood_of_numenor_2
					add_trait = blood_of_numenor_3
				}
				else_if = { 
					limit = { has_trait = blood_of_numenor_1 }	
					remove_trait = blood_of_numenor_1
					add_trait = blood_of_numenor_2
				}
				else = { 
					add_trait = blood_of_numenor_1
				}
			}
			every_close_family_member = {
				if = { 
					limit = { has_trait = blood_of_numenor_10 }	
					add_piety = 1000
				}
				else_if = { 
					limit = { has_trait = blood_of_numenor_9 }	
					remove_trait = blood_of_numenor_9
					add_trait = blood_of_numenor_10
				}
				else_if = { 
					limit = { has_trait = blood_of_numenor_8 }	
					remove_trait = blood_of_numenor_8
					add_trait = blood_of_numenor_9
				}
				else_if = { 
					limit = { has_trait = blood_of_numenor_7 }	
					remove_trait = blood_of_numenor_7
					add_trait = blood_of_numenor_8
				}
				else_if = { 
					limit = { has_trait = blood_of_numenor_6 }	
					remove_trait = blood_of_numenor_6
					add_trait = blood_of_numenor_7
				}
				else_if = { 
					limit = { has_trait = blood_of_numenor_5 }	
					remove_trait = blood_of_numenor_5
					add_trait = blood_of_numenor_6
				}
				else_if = { 
					limit = { has_trait = blood_of_numenor_4 }	
					remove_trait = blood_of_numenor_4
					add_trait = blood_of_numenor_5
				}
				else_if = { 
					limit = { has_trait = blood_of_numenor_3 }	
					remove_trait = blood_of_numenor_3
					add_trait = blood_of_numenor_4
				}
				else_if = { 
					limit = { has_trait = blood_of_numenor_2 }	
					remove_trait = blood_of_numenor_2
					add_trait = blood_of_numenor_3
				}
				else_if = { 
					limit = { has_trait = blood_of_numenor_1 }	
					remove_trait = blood_of_numenor_1
					add_trait = blood_of_numenor_2
				}
				else = { 
					add_trait = blood_of_numenor_1
				}
			}
			every_child = {
				if = { 
					limit = { has_trait = blood_of_numenor_10 }	
					add_piety = 1000
				}
				else_if = { 
					limit = { has_trait = blood_of_numenor_9 }	
					remove_trait = blood_of_numenor_9
					add_trait = blood_of_numenor_10
				}
				else_if = { 
					limit = { has_trait = blood_of_numenor_8 }	
					remove_trait = blood_of_numenor_8
					add_trait = blood_of_numenor_9
				}
				else_if = { 
					limit = { has_trait = blood_of_numenor_7 }	
					remove_trait = blood_of_numenor_7
					add_trait = blood_of_numenor_8
				}
				else_if = { 
					limit = { has_trait = blood_of_numenor_6 }	
					remove_trait = blood_of_numenor_6
					add_trait = blood_of_numenor_7
				}
				else_if = { 
					limit = { has_trait = blood_of_numenor_5 }	
					remove_trait = blood_of_numenor_5
					add_trait = blood_of_numenor_6
				}
				else_if = { 
					limit = { has_trait = blood_of_numenor_4 }	
					remove_trait = blood_of_numenor_4
					add_trait = blood_of_numenor_5
				}
				else_if = { 
					limit = { has_trait = blood_of_numenor_3 }	
					remove_trait = blood_of_numenor_3
					add_trait = blood_of_numenor_4
				}
				else_if = { 
					limit = { has_trait = blood_of_numenor_2 }	
					remove_trait = blood_of_numenor_2
					add_trait = blood_of_numenor_3
				}
				else_if = { 
					limit = { has_trait = blood_of_numenor_1 }	
					remove_trait = blood_of_numenor_1
					add_trait = blood_of_numenor_2
				}
				else = { 
					add_trait = blood_of_numenor_1
				}
			}
		}
		##End Quonton
		trigger_event = gondor.3500
	}
}

## Proclaim New Capital Decision ##
decision_new_capital = {
	sort_order = 2000
	picture = {
		reference = "gfx/interface/illustrations/decisions/decision_minas_tirith_02.dds"
	}

	decision_group_type = realms_in_exile_minor
	
	selection_tooltip = decision_new_capital_tooltip
	title = {
		first_valid = {
			triggered_desc = {
				trigger = {
					dynasty = dynasty:dynasty_tumakveh
				}
				desc = decision_new_capital.t.invocate
			}
			triggered_desc = {
				trigger = {
					has_primary_title = title:e_gondor_steward
				}
				desc = decision_new_capital.t.steward
			}
			triggered_desc = {
				trigger = {
					primary_title = title:k_ithilien
				}
				desc = decision_new_capital.t.prince
			}
			triggered_desc = {
				trigger = {
					has_primary_title = title:e_numenor_in_exile
					has_primary_title = title:e_numenor #Submod Numenor
				}
				desc = decision_new_capital.t.nie
			}
			triggered_desc = {
				trigger = {
					OR = {
						has_primary_title = title:e_gondor
						has_primary_title = title:e_arnor
						has_primary_title = title:e_castamir
						has_primary_title = title:e_reunitedkingdom
						
						has_primary_title = title:e_umbar
						has_primary_title = title:e_adunaim
						has_primary_title = title:e_pharazain
						has_primary_title = title:e_bellakar
					}
				}
				desc = decision_new_capital.t.king
			}
			desc = decision_new_capital.t.fallback
		}
		
	}
	desc = {
		first_valid = {
			triggered_desc = {
				trigger = {
					OR = {
						has_primary_title = title:e_gondor_steward
						has_primary_title = title:e_gondor
					}
				}
				desc = decision_new_capital.desc.gondor
			}
			triggered_desc = {
				trigger = {
					has_primary_title = title:e_castamir
				}
				desc = decision_new_capital.desc.castamir
			}
			triggered_desc = {
				trigger = {
					has_primary_title = title:e_arnor
				}
				desc = decision_new_capital.desc.arnor
			}
			triggered_desc = {
				trigger = {
					has_primary_title = title:e_reunitedkingdom
				}
				desc = decision_new_capital.desc.rk
			}
			triggered_desc = {
				trigger = {
					has_primary_title = title:e_numenor_in_exile
					has_primary_title = title:e_numenor #Submod Numenor
				}
				desc = decision_new_capital.desc.nie
			}
			desc = decision_new_capital.desc.fallback
		}
		
	}
	confirm_text = decision_new_capital_confirm
	
	cooldown = { years = 10 }

	is_shown = {
		is_ai = no # AI handled differently
		is_landed = yes
		lotr_has_numenorean_culture_trigger = yes
		
		### Handled in the individual show_x_capital_trigger
		#highest_held_title_tier = tier_empire	
		#OR = {
		#	has_primary_title = title:e_gondor_steward
		#	has_primary_title = title:e_gondor
		#	has_primary_title = title:e_castamir
		#	has_primary_title = title:e_arnor
		#	has_primary_title = title:e_numenor_in_exile
		#	has_primary_title = title:e_reunitedkingdom
		#	has_primary_title = title:k_ithilien
		#	has_primary_title = title:k_anorien
		#	has_primary_title = title:k_arthedain
		#	has_primary_title = title:k_cardolan
		#}
		OR = { # Ensures at least one option is still available
			show_osgiliath_capital_trigger = yes
			show_minas_tirith_capital_trigger = yes
			show_minas_ithil_capital_trigger = yes
			show_emyn_arnen_capital_trigger = yes
			show_pelargir_capital_trigger = yes
			show_dol_amroth_capital_trigger = yes
			show_methir_capital_trigger = yes
			show_mirlond_capital_trigger = yes
			show_ramlond_capital_trigger = yes
			show_umbar_capital_trigger = yes
			show_annuminas_capital_trigger = yes
			show_fornost_capital_trigger = yes
			show_tharbad_capital_trigger = yes
			show_thalion_capital_trigger = yes
			show_cameth_brin_capital_trigger = yes
			##Quonton
			show_nykkea_capital_trigger = yes
			show_ciryandur_capital_trigger = yes
			show_nilulonde_capital_trigger = yes
			show_urezayan_capital_trigger = yes
			show_korlea_capital_trigger = yes
			show_tariketh_an_kharat_capital_trigger = yes
			show_khorsaj_capital_trigger = yes
			show_inzilloni_capital_trigger = yes
			show_mispir_capital_trigger = yes
			show_uruloni_capital_trigger = yes 
			##End Quonton
			show_tol_uialgaer_capital_trigger = yes
		}
	}
	
	is_valid = {
		lotr_has_numenorean_culture_trigger = yes
		prestige_level >= medium_prestige_level
		OR = {
			trigger_if = {
				limit = { show_osgiliath_capital_trigger = yes }
				valid_osgiliath_capital_trigger = yes
			}
			trigger_if = {
				limit = { show_minas_tirith_capital_trigger = yes }
				valid_minas_tirith_capital_trigger = yes
			}
			trigger_if = {
				limit = { show_minas_ithil_capital_trigger = yes }
				valid_minas_ithil_capital_trigger = yes
			}
			trigger_if = {
				limit = { show_emyn_arnen_capital_trigger = yes }
				valid_emyn_arnen_capital_trigger = yes
			}
			trigger_if = {
				limit = { show_pelargir_capital_trigger = yes }
				valid_pelargir_capital_trigger = yes
			}
			trigger_if = {
				limit = { show_dol_amroth_capital_trigger = yes }
				valid_dol_amroth_capital_trigger = yes
			}
			trigger_if = {
				limit = { show_methir_capital_trigger = yes }
				valid_methir_capital_trigger = yes
			}
			trigger_if = {
				limit = { show_mirlond_capital_trigger = yes }
				valid_mirlond_capital_trigger = yes
			}
			trigger_if = {
				limit = { show_ramlond_capital_trigger = yes }
				valid_ramlond_capital_trigger = yes
			}
			trigger_if = {
				limit = { show_umbar_capital_trigger = yes }
				valid_umbar_capital_trigger = yes
			}
			trigger_if = {
				limit = { show_annuminas_capital_trigger = yes }
				valid_annuminas_capital_trigger = yes
			}
			trigger_if = {
				limit = { show_fornost_capital_trigger = yes }
				valid_fornost_capital_trigger = yes
			}
			trigger_if = {
				limit = { show_tharbad_capital_trigger = yes }
				valid_tharbad_capital_trigger = yes
			}
			trigger_if = {
				limit = { show_thalion_capital_trigger = yes }
				valid_thalion_capital_trigger = yes
			}
			trigger_if = {
				limit = { show_cameth_brin_capital_trigger = yes }
				valid_cameth_brin_capital_trigger = yes
			}
			##Quonton
			trigger_if = {
				limit = { show_nykkea_capital_trigger = yes }
				valid_nykkea_capital_trigger = yes
			}
			trigger_if = {
				limit = { show_ciryandur_capital_trigger = yes }
				valid_ciryandur_capital_trigger = yes
			}
			trigger_if = {
				limit = { show_nilulonde_capital_trigger = yes }
				valid_nilulonde_capital_trigger = yes
			}
			trigger_if = {
				limit = { show_urezayan_capital_trigger = yes }
				valid_urezayan_capital_trigger = yes
			}
			trigger_if = {
				limit = { show_korlea_capital_trigger = yes }
				valid_korlea_capital_trigger = yes
			}
			trigger_if = {
				limit = { show_khorsaj_capital_trigger = yes }
				valid_khorsaj_capital_trigger = yes
			}
			trigger_if = {
				limit = { show_tariketh_an_kharat_capital_trigger = yes }
				valid_tariketh_an_kharat_capital_trigger = yes
			}
			trigger_if = {
				limit = { show_inzilloni_capital_trigger = yes }
				valid_inzilloni_capital_trigger = yes
			}
			trigger_if = {
				limit = { show_mispir_capital_trigger = yes }
				valid_mispir_capital_trigger = yes
			}
			trigger_if = {
				limit = { show_uruloni_capital_trigger = yes }
				valid_uruloni_capital_trigger = yes
			}
			##End Quonton
			trigger_if = {
				limit = { show_tol_uialgaer_capital_trigger = yes }
				valid_tol_uialgaer_capital_trigger = yes
			}
		}
	}
	
	is_valid_showing_failures_only = {
		is_imprisoned = no
		is_available_adult = yes
		is_at_war = no
	}
	
	
	widget = {
		gui = "decision_view_widget_option_list_generic"
		controller = decision_option_list_controller
		decision_to_second_step_button = "decision_new_capital.second_step"
		
		item = {	# Fallback
			value = new_capital_fallback
			localization = decision_new_capital.tt.new_capital_fallback
			icon = "gfx/interface/icons/message_feed/titles.dds"
			is_shown = { always = no }
			is_valid = { always = no }
			ai_chance = { value = 100 }
		}
		
		item = {	# Osgiliath
			value = new_capital_osgiliath
			localization = decision_new_capital.tt.new_capital_osgiliath
			icon = "gfx/interface/icons/message_feed/titles.dds"
			is_shown = { show_osgiliath_capital_trigger = yes }
			is_valid = { valid_osgiliath_capital_trigger = yes }
			ai_chance = { value = 100 }
		}
		item = {	# Minas Tirith
			value = new_capital_minas_tirith
			localization = decision_new_capital.tt.new_capital_minas_tirith
			icon = "gfx/interface/icons/message_feed/titles.dds"
			is_shown = { show_minas_tirith_capital_trigger = yes }
			is_valid = { valid_minas_tirith_capital_trigger = yes }
			ai_chance = { value = 100 }
		}
		item = {	# Minas Ithil
			value = new_capital_minas_ithil
			localization = decision_new_capital.tt.new_capital_minas_ithil
			icon = "gfx/interface/icons/message_feed/titles.dds"
			is_shown = { show_minas_ithil_capital_trigger = yes }
			is_valid = { valid_minas_ithil_capital_trigger = yes }
			ai_chance = { value = 100 }
		}
		item = {	# Emyn Arnen
			value = new_capital_emyn_arnen
			localization = decision_new_capital.tt.new_capital_emyn_arnen
			icon = "gfx/interface/icons/message_feed/titles.dds"
			is_shown = { show_emyn_arnen_capital_trigger = yes }
			is_valid = { valid_emyn_arnen_capital_trigger = yes }
			ai_chance = { value = 100 }
		}
		item = {	# Pelargir
			value = new_capital_pelargir
			localization = decision_new_capital.tt.new_capital_pelargir
			icon = "gfx/interface/icons/message_feed/titles.dds"
			is_shown = { show_pelargir_capital_trigger = yes }
			is_valid = { valid_pelargir_capital_trigger = yes }
			ai_chance = { value = 100 }
		}
		item = {	# Dol Amroth
			value = new_capital_dol_amroth
			localization = decision_new_capital.tt.new_capital_dol_amroth
			icon = "gfx/interface/icons/message_feed/titles.dds"
			is_shown = { show_dol_amroth_capital_trigger = yes }
			is_valid = { valid_dol_amroth_capital_trigger = yes }
			ai_chance = { value = 100 }
		}
		item = {	# Methir
			value = new_capital_methir
			localization = decision_new_capital.tt.new_capital_methir
			icon = "gfx/interface/icons/message_feed/titles.dds"
			is_shown = { show_methir_capital_trigger = yes }
			is_valid = { valid_methir_capital_trigger = yes }
			ai_chance = { value = 100 }
		}
		item = {	# Mirlond
			value = new_capital_mirlond
			localization = decision_new_capital.tt.new_capital_mirlond
			icon = "gfx/interface/icons/message_feed/titles.dds"
			is_shown = { show_mirlond_capital_trigger = yes }
			is_valid = { valid_mirlond_capital_trigger = yes }
			ai_chance = { value = 100 }
		}
		item = {	# Ramlond
			value = new_capital_ramlond
			localization = decision_new_capital.tt.new_capital_ramlond
			icon = "gfx/interface/icons/message_feed/titles.dds"
			is_shown = { show_ramlond_capital_trigger = yes }
			is_valid = { valid_ramlond_capital_trigger = yes }
			ai_chance = { value = 100 }
		}
		item = {	# Umbar
			value = new_capital_umbar
			localization = decision_new_capital.tt.new_capital_umbar
			icon = "gfx/interface/icons/message_feed/titles.dds"
			is_shown = { show_umbar_capital_trigger = yes }
			is_valid = { valid_umbar_capital_trigger = yes }
			ai_chance = { value = 100 }
		}
		item = {	# Annúminas
			value = new_capital_annuminas
			localization = decision_new_capital.tt.new_capital_annuminas
			icon = "gfx/interface/icons/message_feed/titles.dds"
			is_shown = { show_annuminas_capital_trigger = yes }
			is_valid = { valid_annuminas_capital_trigger = yes }
			ai_chance = { value = 100 }
		}
		item = {	# Fornost
			value = new_capital_fornost
			localization = decision_new_capital.tt.new_capital_fornost
			icon = "gfx/interface/icons/message_feed/titles.dds"
			is_shown = { show_fornost_capital_trigger = yes }
			is_valid = { valid_fornost_capital_trigger = yes }
			ai_chance = { value = 100 }
		}
		item = {	# Tharbad
			value = new_capital_tharbad
			localization = decision_new_capital.tt.new_capital_tharbad
			icon = "gfx/interface/icons/message_feed/titles.dds"
			is_shown = { show_tharbad_capital_trigger = yes }
			is_valid = { valid_tharbad_capital_trigger = yes }
			ai_chance = { value = 100 }
		}
		item = {	# Thalion
			value = new_capital_thalion
			localization = decision_new_capital.tt.new_capital_thalion
			icon = "gfx/interface/icons/message_feed/titles.dds"
			is_shown = { show_thalion_capital_trigger = yes }
			is_valid = { valid_thalion_capital_trigger = yes }
			ai_chance = { value = 100 }
		}
		item = {	# Cameth Brin
			value = new_capital_cameth_brin
			localization = decision_new_capital.tt.new_capital_cameth_brin
			icon = "gfx/interface/icons/message_feed/titles.dds"
			is_shown = { show_cameth_brin_capital_trigger = yes }
			is_valid = { valid_cameth_brin_capital_trigger = yes }
			ai_chance = { value = 100 }
		}
		##Quonton
		item = {	# Nykkea
			value = new_capital_nykkea
			localization = decision_new_capital.tt.new_capital_nykkea
			icon = "gfx/interface/icons/message_feed/titles.dds"
			is_shown = { show_nykkea_capital_trigger = yes }
			is_valid = { valid_nykkea_capital_trigger = yes }
			ai_chance = { value = 100 }
		}
		item = {	# Ciryandur
			value = new_capital_ciryandur
			localization = decision_new_capital.tt.new_capital_ciryandur
			icon = "gfx/interface/icons/message_feed/titles.dds"
			is_shown = { show_ciryandur_capital_trigger = yes }
			is_valid = { valid_ciryandur_capital_trigger = yes }
			ai_chance = { value = 100 }
		}
		item = {	# Nilulonde
			value = new_capital_nilulonde
			localization = decision_new_capital.tt.new_capital_nilulonde
			icon = "gfx/interface/icons/message_feed/titles.dds"
			is_shown = { show_nilulonde_capital_trigger = yes }
			is_valid = { valid_nilulonde_capital_trigger = yes }
			ai_chance = { value = 100 }
		}
		item = {	# Urezayan
			value = new_capital_urezayan
			localization = decision_new_capital.tt.new_capital_urezayan
			icon = "gfx/interface/icons/message_feed/titles.dds"
			is_shown = { show_urezayan_capital_trigger = yes }
			is_valid = { valid_urezayan_capital_trigger = yes }
			ai_chance = { value = 100 }
		}
		item = {	# Korlea
			value = new_capital_korlea
			localization = decision_new_capital.tt.new_capital_korlea
			icon = "gfx/interface/icons/message_feed/titles.dds"
			is_shown = { show_korlea_capital_trigger = yes }
			is_valid = { valid_korlea_capital_trigger = yes }
			ai_chance = { value = 100 }
		}
		item = {	# Khorsaj
			value = new_capital_khorsaj
			localization = decision_new_capital.tt.new_capital_khorsaj
			icon = "gfx/interface/icons/message_feed/titles.dds"
			is_shown = { show_khorsaj_capital_trigger = yes }
			is_valid = { valid_khorsaj_capital_trigger = yes }
			ai_chance = { value = 100 }
		}
		item = {	# Tariketh an Kharat
			value = new_capital_tariketh_an_kharat
			localization = decision_new_capital.tt.new_capital_tariketh_an_kharat
			icon = "gfx/interface/icons/message_feed/titles.dds"
			is_shown = { show_tariketh_an_kharat_capital_trigger = yes }
			is_valid = { valid_tariketh_an_kharat_capital_trigger = yes }
			ai_chance = { value = 100 }
		}
		item = {	# Izilloni
			value = new_capital_inzilloni
			localization = decision_new_capital.tt.new_capital_inzilloni
			icon = "gfx/interface/icons/message_feed/titles.dds"
			is_shown = { show_inzilloni_capital_trigger = yes }
			is_valid = { valid_inzilloni_capital_trigger = yes }
			ai_chance = { value = 100 }
		}
		item = {	# Mispir
			value = new_capital_mispir
			localization = decision_new_capital.tt.new_capital_mispir
			icon = "gfx/interface/icons/message_feed/titles.dds"
			is_shown = { show_mispir_capital_trigger = yes }
			is_valid = { valid_mispir_capital_trigger = yes }
			ai_chance = { value = 100 }
		}
		item = {	# Uruloni
			value = new_capital_uruloni
			localization = decision_new_capital.tt.new_capital_uruloni
			icon = "gfx/interface/icons/message_feed/titles.dds"
			is_shown = { show_uruloni_capital_trigger = yes }
			is_valid = { valid_uruloni_capital_trigger = yes }
			ai_chance = { value = 100 }
		}
		##End Quonton
		item = {	# Tol Uialgaer
			value = new_capital_tol_uialgaer
			localization = decision_new_capital.tt.new_capital_tol_uialgaer
			icon = "gfx/interface/icons/message_feed/titles.dds"
			is_shown = { show_tol_uialgaer_capital_trigger = yes }
			is_valid = { valid_tol_uialgaer_capital_trigger = yes }
			ai_chance = { value = 100 }
		}
	}
	
	effect = {
		if = {		# Fallback
			limit = { scope:new_capital_fallback = yes }
			custom_tooltip = new_capital_fallback_effect.tt
		}
		else_if = {		# Osgiliath
			limit = { scope:new_capital_osgiliath = yes }
			set_realm_capital = title:c_osgiliath
			primary_title = { set_capital_county = title:c_osgiliath }
			title:k_anorien = {  set_capital_county = title:c_osgiliath }
			title:d_minas_tirith = {  set_capital_county = title:c_osgiliath }
		}
		else_if = {	# Minas Tirith
			limit = { scope:new_capital_minas_tirith = yes }
			set_realm_capital = title:c_minas_tirith
			primary_title = { set_capital_county = title:c_minas_tirith }
			title:k_anorien = {  set_capital_county = title:c_minas_tirith }
			title:d_minas_tirith = {  set_capital_county = title:c_minas_tirith }
		}
		else_if = {	# Minas Ithil
			limit = { scope:new_capital_minas_ithil = yes }
			set_realm_capital = title:c_minas_ithil
			primary_title = { set_capital_county = title:c_minas_ithil }
			if = {
				limit = {
					NOT = { title:k_ithilien = root.primary_title }
				}
				title:k_ithilien = { set_capital_county = title:c_minas_ithil }
			}
		}
		else_if = {	# Emyn Arnen
			limit = { scope:new_capital_emyn_arnen = yes }
			set_realm_capital = title:c_emyn_arnen
			primary_title = { set_capital_county = title:c_emyn_arnen }
			if = {
				limit = {
					NOT = { title:k_ithilien = root.primary_title }
				}
				title:k_ithilien = { set_capital_county = title:c_emyn_arnen }
			}
		}
		else_if = {	# Pelargir
			limit = { scope:new_capital_pelargir = yes }
			set_realm_capital = title:c_pelargir
			primary_title = { set_capital_county = title:c_pelargir }
		}
		else_if = {	# Dol Amroth
			limit = { scope:new_capital_dol_amroth = yes }
			set_realm_capital = title:c_dol_amroth
			primary_title = { set_capital_county = title:c_dol_amroth }
		}
		else_if = {	# Methir
			limit = { scope:new_capital_methir = yes }
			set_realm_capital = title:c_methir
			primary_title = { set_capital_county = title:c_methir }
		}
		else_if = {	# Mirlond
			limit = { scope:new_capital_mirlond = yes }
			set_realm_capital = title:c_mirlond
			primary_title = { set_capital_county = title:c_mirlond }
		}
		else_if = {	# Ramlond
			limit = { scope:new_capital_ramlond = yes }
			set_realm_capital = title:c_ramlond
			primary_title = { set_capital_county = title:c_ramlond }
		}
		else_if = {	# Umbar
			limit = { scope:new_capital_umbar = yes }
			set_realm_capital = title:c_umbar
			primary_title = { set_capital_county = title:c_umbar }
		}
		else_if = {	# Annúminas
			limit = { scope:new_capital_annuminas = yes }
			set_realm_capital = title:c_annuminas
			primary_title = { set_capital_county = title:c_annuminas }
			if = {
				limit = {
					NOT = { title:k_arthedain = root.primary_title }
				}
				title:k_arthedain = {  set_capital_county = title:c_annuminas }
			}
		}
		else_if = {	# Fornost
			limit = { scope:new_capital_fornost = yes }
			set_realm_capital = title:c_fornost
			primary_title = { set_capital_county = title:c_fornost }
			if = {
				limit = {
					NOT = { title:k_arthedain = root.primary_title }
				}
				title:k_arthedain = {  set_capital_county = title:c_fornost }
			}
		}
		else_if = {	# Tharbad
			limit = { scope:new_capital_tharbad = yes }
			set_realm_capital = title:c_tharbad
			primary_title = { set_capital_county = title:c_tharbad }
			if = {
				limit = {
					NOT = { title:k_cardolan = root.primary_title }
				}
				title:k_cardolan = { set_capital_county = title:c_tharbad }
			}
			title:d_minhiriath = { set_capital_county = title:c_tharbad }
		}
		else_if = {	# Thalion
			limit = { scope:new_capital_thalion = yes }
			set_realm_capital = title:c_thalion
			primary_title = { set_capital_county = title:c_thalion }
			if = {
				limit = {
					NOT = { title:k_cardolan = root.primary_title }
				}
				title:k_cardolan = { set_capital_county = title:c_thalion }
			}
			title:d_minhiriath = { set_capital_county = title:c_thalion }
		}
		else_if = {	# Cameth Brin
			limit = { scope:new_capital_cameth_brin = yes }
			set_realm_capital = title:c_cameth_brin
			primary_title = { set_capital_county = title:c_cameth_brin }
		}
		##Quonton
		else_if = {	# Nykkea
			limit = { scope:new_capital_nykkea = yes }
			set_realm_capital = title:c_nykkea
			primary_title = { set_capital_county = title:c_nykkea }
		}
		else_if = {	# Ciryandur
			limit = { scope:new_capital_ciryandur = yes }
			set_realm_capital = title:c_hazaj_tollin
			primary_title = { set_capital_county = title:c_hazaj_tollin }
		}
		else_if = {	# Nilulonde
			limit = { scope:new_capital_nilulonde = yes }
			set_realm_capital = title:c_nilulonde
			primary_title = { set_capital_county = title:c_nilulonde }
		}
		else_if = {	# Urezayan
			limit = { scope:new_capital_urezayan = yes }
			set_realm_capital = title:c_urezayan
			primary_title = { set_capital_county = title:c_urezayan }
		}
		else_if = {	# Korlea
			limit = { scope:new_capital_korlea = yes }
			set_realm_capital = title:c_korlea
			primary_title = { set_capital_county = title:c_korlea }
		}
		else_if = {	# Khorsaj
			limit = { scope:new_capital_khorsaj = yes }
			set_realm_capital = title:c_khorsaj
			primary_title = { set_capital_county = title:c_khorsaj }
		}
		else_if = {	# Tariketh an Kharat
			limit = { scope:new_capital_tariketh_an_kharat = yes }
			set_realm_capital = title:c_tariketh_an_kharat
			primary_title = { set_capital_county = title:c_tariketh_an_kharat }
		}
		else_if = {	# Izilloni
			limit = { scope:new_capital_inzilloni = yes }
			set_realm_capital = title:c_inzilloni
			primary_title = { set_capital_county = title:c_inzilloni }
		}
		else_if = {	# Mispir
			limit = { scope:new_capital_mispir = yes }
			set_realm_capital = title:c_mispir
			primary_title = { set_capital_county = title:c_mispir }
		}
		else_if = {	# Uruloni
			limit = { scope:new_capital_uruloni = yes }
			set_realm_capital = title:c_uruloni
			primary_title = { set_capital_county = title:c_uruloni }
		}
		##End Quonton
		else_if = {	# Tol Uialgaer
			limit = { scope:new_capital_tol_uialgaer = yes }
			set_realm_capital = title:c_tol_uialgaer
			primary_title = { set_capital_county = title:c_tol_uialgaer }
		}
		
		else = {
			
		}
		
		# decrease opinion with parochial vassals
		every_vassal = {
			custom = every_parochial_vassal
			add_opinion = {
				modifier = angry_opinion
				opinion = -20
				target = root
			}
		}
	}
	
	cost = {
		gold = 150
	}
	
	ai_potential = {
		always = no
	}
	
	ai_check_interval = 150
}

## Dejure Province Restoration ##
decision_restore_gondor_province = {
	sort_order = 90
	title = {
		first_valid = {
			triggered_desc = {
				trigger = {
					OR = {
						has_primary_title = title:e_gondor_steward
						has_primary_title = title:e_gondor
						has_primary_title = title:e_castamir
					}
				}
				desc = decision_restore_gondor_province.gondorian
			}
			triggered_desc = {
				trigger = {
					OR = {
						has_primary_title = title:e_reunitedkingdom
						has_primary_title = title:e_arnor
					}
				}
				desc = decision_restore_gondor_province.dunedain
			}
			##Quonton
			triggered_desc = {
				trigger = {
					has_primary_title = title:e_pharazain
				}
				desc = decision_restore_gondor_province.adunaic
			}
			##End Quonton
			desc = decision_restore_gondor_province.numenorean
		}
		
	}
	picture = {
		reference = "gfx/interface/illustrations/decisions/decision_minas_tirith_02.dds"
	}

	decision_group_type = realms_in_exile_major
	
	selection_tooltip = decision_restore_gondor_province_tooltip
	desc = decision_restore_gondor_province_desc
	confirm_text = decision_restore_gondor_province_confirm
	
	is_shown = {
		is_landed = yes
		highest_held_title_tier = tier_empire
		OR = {
			#is_gondor = yes
			has_title = title:e_gondor_steward
			has_title = title:e_gondor
			has_title = title:e_castamir
			has_title = title:e_numenor_in_exile
			has_title = title:e_numenor #Submod Numenor
			AND = {
				has_title = title:e_reunitedkingdom
				is_target_in_global_variable_list = {
					name = unavailable_unique_decisions
					target = flag:decision_solidify_reunited_kingdom
				}
			}
			##Quonton
			AND = {
				has_title = title:e_pharazain
				is_target_in_global_variable_list = {
					name = unavailable_unique_decisions
					target = flag:decision_solidify_pharazain
				}
			}
			##End Quonton
		}
		OR = { # Ensures at least one option is still available
			show_harondor_trigger = yes
			show_harnendor_trigger = yes
			show_andrast_trigger = yes
			show_umbar_trigger = yes
			show_calenardhon_trigger = yes
			show_dor_rhunen_trigger = yes
			show_enedhwaith_trigger = yes
			show_eregion_trigger = yes
			##Quonton
			show_haruzan_trigger = yes
			show_narak_trigger = yes
			show_tedja_trigger = yes
			show_qarsa_trigger = yes
			show_aukar_trigger = yes
			show_ray_trigger = yes
			show_raishoul_trigger = yes
			show_zajantak_trigger = yes
			show_mag_trigger = yes
			show_tumag_trigger = yes
			show_usakan_trigger = yes
			show_tanturak_trigger = yes
			##End Quonton
		}
	}
	
	is_valid = {
		lotr_has_numenorean_culture_trigger = yes
		prestige_level >= high_prestige_level
		OR = {
			trigger_if = { # Harondor
				limit = { show_harondor_trigger = yes }
				completely_controls = title:k_harondor
			}
			trigger_if = { # Harnendor
				limit = { show_harnendor_trigger = yes }
				completely_controls = title:k_mirlond
			}
			trigger_if = { # Andrast
				limit = { show_andrast_trigger = yes }
				completely_controls = title:k_andrast
			}
			trigger_if = { # Umbar
				limit = { show_umbar_trigger = yes }
				completely_controls = title:k_umbar
			}
			trigger_if = { # Calenardhon
				limit = { show_calenardhon_trigger = yes }
				completely_controls_region = middleearth_west_rohan
			}
			trigger_if = { # Dór Rhunen
				limit = { show_dor_rhunen_trigger = yes }
				AND = {
					completely_controls = title:k_south_rhovanion
					completely_controls = title:k_brownlands
				}
			}
			trigger_if = { # Enedhwaith - RK/NiE Only
				limit = { show_enedhwaith_trigger = yes }
				AND = {
					completely_controls = title:k_druwaith
					completely_controls = title:k_enedhwaith
					completely_controls = title:k_dunland
				}
			}
			trigger_if = { # Eregion - RK/NiE Only
				limit = { show_eregion_trigger = yes }
				completely_controls = title:k_eregion
			}
			##Quonton
			trigger_if = { # Haruzan - Pharazain/NiE Only
				limit = { show_haruzan_trigger = yes }
				completely_controls = title:k_haruzan
			}
			trigger_if = { # Narak - Pharazain/NiE Only
				limit = { show_narak_trigger = yes }
				completely_controls = title:k_narak
			}
			trigger_if = { # Tedja - Pharazain/NiE Only
				limit = { show_tedja_trigger = yes }
				completely_controls = title:k_tedja
			}
			trigger_if = { # Qarsa - Pharazain/NiE Only
				limit = { show_qarsa_trigger = yes }
				completely_controls = title:k_qarsa
			}
			trigger_if = { # Aukar - Pharazain/NiE Only
				limit = { show_aukar_trigger = yes }
				completely_controls = title:k_aukar
			}
			trigger_if = { # Ray - Pharazain/NiE Only
				limit = { show_ray_trigger = yes }
				completely_controls = title:k_ray
			}
			trigger_if = { # Raishoul - Pharazain/NiE Only
				limit = { show_raishoul_trigger = yes }
				completely_controls = title:k_raishoul
			}
			trigger_if = { # Zajantak - Pharazain/NiE Only
				limit = { show_zajantak_trigger = yes }
				completely_controls = title:k_zajantak
			}
			trigger_if = { # Mag - Pharazain/NiE Only
				limit = { show_mag_trigger = yes }
				completely_controls = title:k_mag
			}
			trigger_if = { # Tumag - Pharazain/NiE Only
				limit = { show_tumag_trigger = yes }
				completely_controls = title:k_tumag
			}
			trigger_if = { # Usakan - Pharazain/NiE Only
				limit = { show_usakan_trigger = yes }
				completely_controls = title:k_usakan
			}
			trigger_if = { # Tanturak - Pharazain/NiE Only
				limit = { show_tanturak_trigger = yes }
				completely_controls = title:k_tanturak
			}
			##End Quonton
		}
	}
	
	is_valid_showing_failures_only = {
		is_imprisoned = no
		is_available_adult = yes
		is_at_war = no
	}
	
	widget = {
		gui = "decision_view_widget_option_list_generic"
		controller = decision_option_list_controller
		decision_to_second_step_button = "decision_restore_gondor_province.second_step"
		
		item = {	# Fallback - Displayed if no others available
			value = reintegrate_province_fallback
			localization = decision_restore_gondor_province.tt.fallback
			icon = "gfx/interface/icons/message_feed/conciliation.dds"
			is_shown = { always = no }
			is_valid = { always = no }
			ai_chance = {
				value = 100
			}
		}
		
		item = {	# Harondor
			value = reintegrate_province_harondor
			current_description = decision_restore_gondor_province.tt.harondor_desc
			localization = decision_restore_gondor_province.tt.harondor
			icon = "gfx/interface/icons/message_feed/conciliation.dds"
			is_shown = { show_harondor_trigger = yes }
			is_valid = {
				completely_controls = title:k_harondor
			}
			ai_chance = {
				value = 100
			}
		}
		item = {	# Harnendor
			value = reintegrate_province_harnendor
			current_description = decision_restore_gondor_province.tt.harnendor_desc
			localization = decision_restore_gondor_province.tt.harnendor
			icon = "gfx/interface/icons/message_feed/steward_job.dds"
			is_shown = { show_harnendor_trigger = yes }
			is_valid = {
				completely_controls = title:k_mirlond
			}
			ai_chance = {
				value = 100
			}
		}
		item = {	# Andrast
			value = reintegrate_province_andrast
			current_description = decision_restore_gondor_province.tt.andrast_desc
			localization = decision_restore_gondor_province.tt.andrast
			icon = "gfx/interface/icons/message_feed/gondorian_clansmen.dds"
			is_shown = { show_andrast_trigger = yes }
			is_valid = {
				completely_controls = title:k_andrast
			}
			ai_chance = {
				value = 100
			}
		}
		item = {	# Umbar
			value = reintegrate_province_umbar
			current_description = decision_restore_gondor_province.tt.umbar_desc
			localization = decision_restore_gondor_province.tt.umbar
			icon = "gfx/interface/icons/message_feed/compass_light.dds"
			is_shown = { show_umbar_trigger = yes }
			is_valid = {
				completely_controls = title:k_umbar
			}
			ai_chance = {
				value = 100
			}
		}
		item = {	# Calenardhon
			value = reintegrate_province_calenardhon
			current_description = decision_restore_gondor_province.tt.calenardhon_desc
			localization = decision_restore_gondor_province.tt.calenardhon
			icon = "gfx/interface/icons/message_feed/eorlingas_warriors.dds"
			is_shown = { show_calenardhon_trigger = yes }
			is_valid = {
				completely_controls_region = middleearth_west_rohan
			}
			ai_chance = {
				value = 100
			}
		}
		item = {	# Dor Rhúnen
			value = reintegrate_province_dor_rhunen
			current_description = decision_restore_gondor_province.tt.dor_rhunen_desc
			localization = decision_restore_gondor_province.tt.dor_rhunen
			icon = "gfx/interface/icons/message_feed/harondorim_rangers.dds"
			is_shown = { show_dor_rhunen_trigger = yes }
			is_valid = {
				completely_controls = title:k_south_rhovanion
				completely_controls = title:k_brownlands
			}
			ai_chance = {
				value = 100
			}
		}
		item = {	# Enedhwaith	- RK/NiE Only
			value = reintegrate_province_enedhwaith
			current_description = decision_restore_gondor_province.tt.enedhwaith_desc
			localization = decision_restore_gondor_province.tt.enedhwaith
			icon = "gfx/interface/icons/message_feed/generic_neutral_effect.dds"
			is_shown = { show_enedhwaith_trigger = yes }
			is_valid = {
				completely_controls = title:k_druwaith
				completely_controls = title:k_enedhwaith
				completely_controls = title:k_dunland
			}
			ai_chance = {
				value = 100
			}
		}
		item = {	# Eregion		- RK/NiE Only
			value = reintegrate_province_eregion
			current_description = decision_restore_gondor_province.tt.eregion_desc
			localization = decision_restore_gondor_province.tt.eregion
			icon = "gfx/interface/icons/message_feed/a_catch_all_councillor_icon.dds"
			is_shown = { show_eregion_trigger = yes }
			is_valid = {
				completely_controls = title:k_eregion
			}
			ai_chance = {
				value = 100
			}
		}
		##Quonton
		item = {	# Haruzan		- Pharazain/NiE Only
			value = reintegrate_province_haruzan
			current_description = decision_restore_gondor_province.tt.haruzan_desc
			localization = decision_restore_gondor_province.tt.haruzan_desc
			icon = "gfx/interface/icons/message_feed/icon_bishop_temp.dds"
			is_shown = { show_haruzan_trigger = yes }
			is_valid = {
				completely_controls = title:k_haruzan
			}
			ai_chance = {
				value = 100
			}
		}
		item = {	# Narak		- Pharazain/NiE Only
			value = reintegrate_province_narak
			current_description = decision_restore_gondor_province.tt.narak_desc
			localization = decision_restore_gondor_province.tt.narak_desc
			icon = "gfx/interface/icons/message_feed/opportunity.dds"
			is_shown = { show_narak_trigger = yes }
			is_valid = {
				completely_controls = title:k_narak
			}
			ai_chance = {
				value = 100
			}
		}
		item = {	# Tedja		- Pharazain/NiE Only
			value = reintegrate_province_tedja
			current_description = decision_restore_gondor_province.tt.tedja_desc
			localization = decision_restore_gondor_province.tt.tedja_desc
			icon = "gfx/interface/icons/message_feed/county_corruption.dds"
			is_shown = { show_tedja_trigger = yes }
			is_valid = {
				completely_controls = title:k_tedja
			}
			ai_chance = {
				value = 100
			}
		}
		item = {	# Qarsa		- Pharazain/NiE Only
			value = reintegrate_province_qarsa
			current_description = decision_restore_gondor_province.tt.qarsa_desc
			localization = decision_restore_gondor_province.tt.qarsa_desc
			icon = "gfx/interface/icons/message_feed/court_physician.dds"
			is_shown = { show_qarsa_trigger = yes }
			is_valid = {
				completely_controls = title:k_qarsa
			}
			ai_chance = {
				value = 100
			}
		}
		item = {	# Aukar		- Pharazain/NiE Only
			value = reintegrate_province_aukar
			current_description = decision_restore_gondor_province.tt.aukar_desc
			localization = decision_restore_gondor_province.tt.aukar_desc
			icon = "gfx/interface/icons/message_feed/culture.dds"
			is_shown = { show_aukar_trigger = yes }
			is_valid = {
				completely_controls = title:k_aukar
			}
			ai_chance = {
				value = 100
			}
		}
		item = {	# Ray		- Pharazain/NiE Only
			value = reintegrate_province_ray
			current_description = decision_restore_gondor_province.tt.ray_desc
			localization = decision_restore_gondor_province.tt.ray_desc
			icon = "gfx/interface/icons/message_feed/contract.dds"
			is_shown = { show_ray_trigger = yes }
			is_valid = {
				completely_controls = title:k_ray
			}
			ai_chance = {
				value = 100
			}
		}
		item = {	# Raishoul		- Pharazain/NiE Only
			value = reintegrate_province_raishoul
			current_description = decision_restore_gondor_province.tt.raishoul_desc
			localization = decision_restore_gondor_province.tt.raishoul_desc
			icon = "gfx/interface/icons/message_feed/compromise.dds"
			is_shown = { show_raishoul_trigger = yes }
			is_valid = {
				completely_controls = title:k_raishoul
			}
			ai_chance = {
				value = 100
			}
		}
		item = {	# Zajantak		- Pharazain/NiE Only
			value = reintegrate_province_zajantak
			current_description = decision_restore_gondor_province.tt.zajantak_desc
			localization = decision_restore_gondor_province.tt.zajantak_desc
			icon = "gfx/interface/icons/message_feed/bodyguard.dds"
			is_shown = { show_zajantak_trigger = yes }
			is_valid = {
				completely_controls = title:k_zajantak
			}
			ai_chance = {
				value = 100
			}
		}
		item = {	# Mag		- Pharazain/NiE Only
			value = reintegrate_province_mag
			current_description = decision_restore_gondor_province.tt.mag_desc
			localization = decision_restore_gondor_province.tt.mag_desc
			icon = "gfx/interface/icons/message_feed/adventurer.dds"
			is_shown = { show_mag_trigger = yes }
			is_valid = {
				completely_controls = title:k_mag
			}
			ai_chance = {
				value = 100
			}
		}
		item = {	# Tumag		- Pharazain/NiE Only
			value = reintegrate_province_tumag
			current_description = decision_restore_gondor_province.tt.tumag_desc
			localization = decision_restore_gondor_province.tt.tumag_desc
			icon = "gfx/interface/icons/message_feed/banner.dds"
			is_shown = { show_tumag_trigger = yes }
			is_valid = {
				completely_controls = title:k_tumag
			}
			ai_chance = {
				value = 100
			}
		}
		item = {	# Usakan		- Pharazain/NiE Only
			value = reintegrate_province_usakan
			current_description = decision_restore_gondor_province.tt.usakan_desc
			localization = decision_restore_gondor_province.tt.usakan_desc
			icon = "gfx/interface/icons/message_feed/artifact.dds"
			is_shown = { show_usakan_trigger = yes }
			is_valid = {
				completely_controls = title:k_usakan
			}
			ai_chance = {
				value = 100
			}
		}
		item = {	# Tanturak		- Pharazain/NiE Only
			value = reintegrate_province_tanturak
			current_description = decision_restore_gondor_province.tt.tanturak_desc
			localization = decision_restore_gondor_province.tt.tanturak_desc
			icon = "gfx/interface/icons/message_feed/administration.dds"
			is_shown = { show_tanturak_trigger = yes }
			is_valid = {
				completely_controls = title:k_tanturak
			}
			ai_chance = {
				value = 100
			}
		}
		##End Quonton
	}
	
	effect = {
		play_music_cue = lotr_cue_gondor
		if = {		# Fallback - Displays as effect if no others available
			limit = {
				scope:reintegrate_province_fallback = yes
			}
			custom_tooltip = restore_province_fallback_effect.tt
		}
		else_if = {		# Harondor
			limit = {
				scope:reintegrate_province_harondor = yes
			}
			custom_tooltip = reclaim_harondor_decision
			root = { save_scope_as = new_ruler }
			title:k_harondor = {
				set_appropriate_de_jure_liege = yes
			}
			title:k_harondor = {
				change_development_level = 3
			}
			add_to_global_variable_list = {
				name = unavailable_unique_decisions
				target = flag:reclaim_harondor_decision
			}
			trigger_event = gondor.1000
			save_scope_as = restorer
			# Send event to other players
			every_player = { # TBD: proper news event
				limit = {
					NOT = { this = root }
					culture = {
						OR = {
							has_cultural_pillar = heritage_daen_coentis
							has_cultural_pillar = heritage_daen_lintis
							has_cultural_pillar = heritage_danan_lin
							has_cultural_pillar = heritage_northern_apysaic
							has_cultural_pillar = heritage_dunedain
							has_cultural_pillar = heritage_northern_adunaic
							##Quonton
							has_cultural_pillar = heritage_unified_adunaic
							has_cultural_pillar = heritage_hadorim
						}
					}
				}
				trigger_event = gondor.1001
			}
		}
		else_if = {		# Harnendor
			limit = {
				scope:reintegrate_province_harnendor = yes
			}
			custom_tooltip = reclaim_harnendor_decision
			root = { save_scope_as = new_ruler }
			title:k_mirlond = {
				set_appropriate_de_jure_liege = yes
			}
			add_to_global_variable_list = {
				name = unavailable_unique_decisions
				target = flag:reclaim_harnendor_decision
			}
		}
		else_if = {	# Andrast
			limit = {
				scope:reintegrate_province_andrast = yes
			}
			custom_tooltip = integrate_andrast_decision
			root = { save_scope_as = new_ruler }
			title:k_andrast = {
				set_appropriate_de_jure_liege = yes
			}
			add_to_global_variable_list = {
				name = unavailable_unique_decisions
				target = flag:integrate_andrast_decision
			}
			title:k_andrast = {
				change_development_level = 3
			}
			save_scope_as = restorer
			trigger_event = gondor.1002
		}
		else_if = {	# Umbar
			limit = {
				scope:reintegrate_province_umbar = yes
			}
			custom_tooltip = reclaim_umbar_decision
			root = { save_scope_as = new_ruler }
			title:k_umbar = {
				set_appropriate_de_jure_liege = yes
			}
			add_to_global_variable_list = {
				name = unavailable_unique_decisions
				target = flag:reclaim_umbar_decision
			}
			if = {
				limit = {
					NOT = { has_character_flag = had_nickname_event }
				}
				give_nickname = nick_southernvictor
				add_character_flag = had_nickname_event
			}
			save_scope_as = restorer
			trigger_event = gondor.1003
		}
		else_if = {	# Calenardhon
			limit = {
				scope:reintegrate_province_calenardhon = yes
			}
			custom_tooltip = integrate_calenardhon_decision
			root = { save_scope_as = new_ruler }
			title:k_rohan = {
				set_appropriate_de_jure_liege = yes
			}
			add_to_global_variable_list = {
				name = unavailable_unique_decisions
				target = flag:integrate_calenardhon_decision
			}
				
			trigger_event = gondor.2500
			save_scope_as = restorer
			# Send event to other players
			every_player = { # TBD: proper news event
				limit = {
					NOT = { this = root }
					culture = {
						OR = {
							has_cultural_pillar = heritage_daen_coentis
							has_cultural_pillar = heritage_daen_lintis
							has_cultural_pillar = heritage_danan_lin
							has_cultural_pillar = heritage_northern_apysaic
							has_cultural_pillar = heritage_dunedain
							has_cultural_pillar = heritage_northern_adunaic
							##Quonton
							has_cultural_pillar = heritage_unified_adunaic
							has_cultural_pillar = heritage_hadorim
							has_cultural_pillar = heritage_northron
						}
					}
				}
				trigger_event = gondor.2501
			}
			
			if = {
				limit = { 
					NOT = { exists = global_var:lotr_achievement_09 }
					is_ai = no
					realms_achievements_enabled = yes
				}
				set_global_variable = lotr_achievement_09
			}
		}
		else_if = {	# Dor Rhúnen
			limit = {
				scope:reintegrate_province_dor_rhunen = yes
			}
			custom_tooltip = reclaim_dor_rhunen_decision
			root = { save_scope_as = new_ruler }
			title:k_south_rhovanion = {
				set_appropriate_de_jure_liege = yes
			}

			title:k_brownlands = {
				set_appropriate_de_jure_liege = yes
			}
	
			add_to_global_variable_list = {
				name = unavailable_unique_decisions
				target = flag:reclaim_dor_rhunen_decision
			}
			if = {
				limit = {
					NOT = { has_character_flag = had_nickname_event }
				}
				give_nickname = nick_romendacil
				add_character_flag = had_nickname_event
			}
			save_scope_as = restorer
			trigger_event = gondor.2700
		}
		else_if = {	# Enedhwaith	- RK/NiE Only
			limit = {
				scope:reintegrate_province_enedhwaith = yes
			}
			custom_tooltip = claim_enedhwaith_decision
			root = { save_scope_as = new_ruler }
			title:k_druwaith = {
				set_appropriate_de_jure_liege = yes
			}
			title:k_enedhwaith = {
				set_appropriate_de_jure_liege = yes
			}
			title:k_dunland = {
				set_appropriate_de_jure_liege = yes
			}
			title:k_druwaith = {
				change_development_level = 3
			}
			title:k_enedhwaith = {
				change_development_level = 3
			}
			title:k_dunland = {
				change_development_level = 3
			}
			
			add_to_global_variable_list = {
				name = unavailable_unique_decisions
				target = flag:decision_claim_enedhwaith
			}
		}
		else_if = {	# Eregion		- RK/NiE Only
			limit = {
				scope:reintegrate_province_eregion = yes
			}
			custom_tooltip = integrate_eregion_decision
			root = { save_scope_as = new_ruler }
			title:k_eregion = {
				set_appropriate_de_jure_liege = yes
			}
			title:k_eregion = {
				change_development_level = 3
			}
			add_to_global_variable_list = {
				name = unavailable_unique_decisions
				target = flag:decision_integrate_eregion
			}
		}
		##Quonton
		else_if = {	# Haruzan		- Pharazain/NiE Only
			limit = {
				scope:reintegrate_province_haruzan = yes
			}
			custom_tooltip = integrate_haruzan_decision
			root = { save_scope_as = new_ruler }
			title:k_haruzan = {
				set_appropriate_de_jure_liege = yes
			}
			title:k_haruzan = {
				change_development_level = 2
			}
			add_to_global_variable_list = {
				name = unavailable_unique_decisions
				target = flag:decision_integrate_haruzan
			}
		}
		else_if = {	# Narak		- Pharazain/NiE Only
			limit = {
				scope:reintegrate_province_narak = yes
			}
			custom_tooltip = integrate_narak_decision
			root = { save_scope_as = new_ruler }
			title:k_narak = {
				set_appropriate_de_jure_liege = yes
			}
			title:k_narak = {
				change_development_level = 2
			}
			add_to_global_variable_list = {
				name = unavailable_unique_decisions
				target = flag:decision_integrate_narak
			}
		}
		else_if = {	# Tedja		- Pharazain/NiE Only
			limit = {
				scope:reintegrate_province_tedja = yes
			}
			custom_tooltip = integrate_tedja_decision
			root = { save_scope_as = new_ruler }
			title:k_tedja = {
				set_appropriate_de_jure_liege = yes
			}
			title:k_tedja = {
				change_development_level = 2
			}
			add_to_global_variable_list = {
				name = unavailable_unique_decisions
				target = flag:decision_integrate_tedja
			}
		}
		else_if = {	# Qarsa		- Pharazain/NiE Only
			limit = {
				scope:reintegrate_province_qarsa = yes
			}
			custom_tooltip = integrate_qarsa_decision
			root = { save_scope_as = new_ruler }
			title:k_qarsa = {
				set_appropriate_de_jure_liege = yes
			}
			title:k_qarsa = {
				change_development_level = 2
			}
			add_to_global_variable_list = {
				name = unavailable_unique_decisions
				target = flag:decision_integrate_qarsa
			}
		}
		else_if = {	# Aukar		- Pharazain/NiE Only
			limit = {
				scope:reintegrate_province_aukar = yes
			}
			custom_tooltip = integrate_aukar_decision
			root = { save_scope_as = new_ruler }
			title:k_aukar = {
				set_appropriate_de_jure_liege = yes
			}
			title:k_aukar = {
				change_development_level = 2
			}
			add_to_global_variable_list = {
				name = unavailable_unique_decisions
				target = flag:decision_integrate_aukar
			}
		}
		else_if = {	# Ray		- Pharazain/NiE Only
			limit = {
				scope:reintegrate_province_ray = yes
			}
			custom_tooltip = integrate_ray_decision
			root = { save_scope_as = new_ruler }
			title:k_ray = {
				set_appropriate_de_jure_liege = yes
			}
			title:k_ray = {
				change_development_level = 2
			}
			add_to_global_variable_list = {
				name = unavailable_unique_decisions
				target = flag:decision_integrate_ray
			}
		}
		else_if = {	# Raishoul		- Pharazain/NiE Only
			limit = {
				scope:reintegrate_province_raishoul = yes
			}
			custom_tooltip = integrate_raishoul_decision
			root = { save_scope_as = new_ruler }
			title:k_raishoul = {
				set_appropriate_de_jure_liege = yes
			}
			title:k_raishoul = {
				change_development_level = 2
			}
			add_to_global_variable_list = {
				name = unavailable_unique_decisions
				target = flag:decision_integrate_raishoul
			}
		}
		else_if = {	# Zajantak		- Pharazain/NiE Only
			limit = {
				scope:reintegrate_province_zajantak = yes
			}
			custom_tooltip = integrate_zajantak_decision
			root = { save_scope_as = new_ruler }
			title:k_zajantak = {
				set_appropriate_de_jure_liege = yes
			}
			title:k_zajantak = {
				change_development_level = 2
			}
			add_to_global_variable_list = {
				name = unavailable_unique_decisions
				target = flag:decision_integrate_zajantak
			}
		}
		else_if = {	# Mag		- Pharazain/NiE Only
			limit = {
				scope:reintegrate_province_mag = yes
			}
			custom_tooltip = integrate_mag_decision
			root = { save_scope_as = new_ruler }
			title:k_mag = {
				set_appropriate_de_jure_liege = yes
			}
			title:k_mag = {
				change_development_level = 2
			}
			add_to_global_variable_list = {
				name = unavailable_unique_decisions
				target = flag:decision_integrate_mag
			}
		}
		else_if = {	# Tumag		- Pharazain/NiE Only
			limit = {
				scope:reintegrate_province_tumag = yes
			}
			custom_tooltip = integrate_tumag_decision
			root = { save_scope_as = new_ruler }
			title:k_tumag = {
				set_appropriate_de_jure_liege = yes
			}
			title:k_tumag = {
				change_development_level = 2
			}
			add_to_global_variable_list = {
				name = unavailable_unique_decisions
				target = flag:decision_integrate_tumag
			}
		}
		else_if = {	# Usakan		- Pharazain/NiE Only
			limit = {
				scope:reintegrate_province_usakan = yes
			}
			custom_tooltip = integrate_usakan_decision
			root = { save_scope_as = new_ruler }
			title:k_usakan = {
				set_appropriate_de_jure_liege = yes
			}
			title:k_usakan = {
				change_development_level = 2
			}
			add_to_global_variable_list = {
				name = unavailable_unique_decisions
				target = flag:decision_integrate_usakan
			}
		}
		else_if = {	# Tanturak		- Pharazain/NiE Only
			limit = {
				scope:reintegrate_province_tanturak = yes
			}
			custom_tooltip = integrate_tanturak_decision
			root = { save_scope_as = new_ruler }
			title:k_tanturak = {
				set_appropriate_de_jure_liege = yes
			}
			title:k_tanturak = {
				change_development_level = 2
			}
			add_to_global_variable_list = {
				name = unavailable_unique_decisions
				target = flag:decision_integrate_tanturak
			}
		}	
		##End Quonton
		
		else = {
			
		}

		dynasty = { add_dynasty_prestige = 300 }
		add_legitimacy = medium_legitimacy_gain

		if = { # Everydacil | Achievement 
			limit = {
				NOT = { exists = global_var:lotr_achievement_54 }
				is_ai = no
				realms_achievements_enabled = yes
				is_target_in_global_variable_list = {
					name = unavailable_unique_decisions
					target = flag:integrate_calenardhon_decision
				}
				is_target_in_global_variable_list = {
					name = unavailable_unique_decisions
					target = flag:reclaim_dor_rhunen_decision
				}
				is_target_in_global_variable_list = {
					name = unavailable_unique_decisions
					target = flag:reclaim_umbar_decision
				}
				is_target_in_global_variable_list = {
					name = unavailable_unique_decisions
					target = flag:integrate_andrast_decision
				}
				#is_target_in_global_variable_list = { # Juke note: Harnendor is only accessible under specific circumstances
				#	name = unavailable_unique_decisions
				#	target = flag:reclaim_harnendor_decision
				#}
				is_target_in_global_variable_list = {
					name = unavailable_unique_decisions
					target = flag:reclaim_harondor_decision
				}
			}
			set_global_variable = lotr_achievement_54
		}
		
		hidden_effect = {
			dynasty = {
				if = {
					limit = {
						exists = var:reintegrated_provinces_counter
					}
					change_variable = {
						name = reintegrated_provinces_counter
						add = 1
					}
				}
				else = {
					set_variable = {
						name = reintegrated_provinces_counter
						value = 1
					}
				}
			}
		}
	}
	
	cost = {
		gold = {
			if = {
				limit = {
					is_ai = no
				}
				value = 250
			}
			else = {
				value = 1
			}
		}
		prestige = {
			if = {
				limit = {
					is_ai = no
				}
				value = 500
			}
			else = {
				value = 1
			}
		}
	}
	
	ai_goal = yes
	
	ai_potential = {
		always = yes
	}
	ai_will_do = {
		base = 1000
	}
}

## Watch on Mordor decisions ##
decision_recreate_watch_on_mordor = {
	title = decision_recreate_watch_on_mordor
	picture = {
		reference = "gfx/interface/illustrations/decisions/decision_barad_dur_01.dds"
	}
	
	ai_goal = yes
	ai_potential = {
		always = yes
	}
	ai_will_do = {
		base = 100
	}

	decision_group_type = realms_in_exile_major
		
	desc = decision_recreate_watch_on_mordor_desc
	selection_tooltip = decision_recreate_watch_on_mordor_desc_tooltip
	confirm_text = decision_recreate_watch_on_mordor_confirm
		
	is_shown = {
		#current_year >= 3000
		OR = {
			culture = { has_cultural_pillar = heritage_dunedain }
			##Quonton
			culture = { has_cultural_tradition = tradition_new_numenor }
			culture = { has_cultural_pillar = heritage_calaquendi }
			culture = { has_cultural_pillar = heritage_lomiquendi }
			culture = { has_cultural_pillar = heritage_moriquendi }
		}
		is_landed = yes
		faith_is_good = yes
		OR = {
			has_primary_title = title:e_gondor
			has_primary_title = title:e_gondor_steward
			has_primary_title = title:e_arnor
			has_primary_title = title:e_numenor_in_exile
			has_primary_title = title:e_reunitedkingdom
			has_primary_title = title:e_bellakar
			has_primary_title = title:e_castamir
			has_primary_title = title:e_numenor #Submod Numenor
			AND = {
				is_elf = yes
				highest_held_title_tier >= tier_kingdom
			}
		}
		NOR = {
			exists = title:d_watch_on_mordor.holder
			is_target_in_global_variable_list = {
				name = unavailable_unique_decisions
				target = flag:decision_recreate_watch_on_mordor
			}
		}
		OR = {
			NOT = { exists = title:e_mordor.holder }
			has_title = title:e_mordor
		}
	}
	is_valid = {
		OR = {
			culture = { has_cultural_pillar = heritage_dunedain }
			##Quonton
			culture = { has_cultural_tradition = tradition_new_numenor }
			culture = { has_cultural_pillar = heritage_calaquendi }
			culture = { has_cultural_pillar = heritage_lomiquendi }
			culture = { has_cultural_pillar = heritage_moriquendi }
		}
		completely_controls = title:c_morannon
		completely_controls = title:c_durthang
		completely_controls = title:c_cirith_ungol
		completely_controls = title:c_lhingris
	}
	is_valid_showing_failures_only = {
		is_imprisoned = no
		is_available_adult = yes
	}
	cost = {
		gold = 150
	}
	effect = {
		trigger_event = {
			id = gondor.4001
		}
		add_prestige = major_prestige_gain
		add_to_global_variable_list = {
            name = unavailable_unique_decisions
            target = flag:decision_recreate_watch_on_mordor
        }
		remove_list_global_variable = {
   		name = unavailable_unique_decisions
   			target = flag:decision_abandon_watch_on_mordor
		}
	}
}

decision_abandon_watch_on_mordor = {
	title = decision_abandon_watch_on_mordor
	picture = {
		reference = "gfx/interface/illustrations/decisions/decision_barad_dur_01.dds"
	}
	
	ai_goal = yes
	ai_potential = { 
		always = no
	}
	ai_will_do = { 
		base = 0
	}

	decision_group_type = realms_in_exile_major
	
	desc = decision_abandon_watch_on_mordor_desc
	selection_tooltip = decision_abandon_watch_on_mordor_desc_tooltip
	confirm_text = decision_abandon_watch_on_mordor_confirm
		
	is_shown = {
		#current_year >= 3000
		OR = {
			culture = { has_cultural_pillar = heritage_dunedain }
			##Quonton
			culture = { has_cultural_tradition = tradition_new_numenor }
			culture = { has_cultural_pillar = heritage_calaquendi }
			culture = { has_cultural_pillar = heritage_lomiquendi }
			culture = { has_cultural_pillar = heritage_moriquendi }
		}
		is_landed = yes
		exists = title:d_watch_on_mordor.holder
		completely_controls = title:c_morannon
		OR = {
			has_primary_title = title:e_gondor
			has_primary_title = title:e_gondor_steward
			has_primary_title = title:e_arnor
			has_primary_title = title:e_numenor_in_exile
			has_primary_title = title:e_reunitedkingdom
			has_primary_title = title:e_bellakar
			has_primary_title = title:e_castamir
			has_primary_title = title:e_numenor #Submod Numenor
			AND = {
				is_elf = yes
				highest_held_title_tier >= tier_kingdom
			}
		}
		NOR = {
			is_target_in_global_variable_list = {
				name = unavailable_unique_decisions
				target = flag:decision_abandon_watch_on_mordor
			}
		}
		OR = {
			NOT = { exists = title:e_mordor.holder }
			has_title = title:e_mordor
		}
	}
	is_valid = {
		exists = title:d_watch_on_mordor.holder
		completely_controls = title:c_morannon # The Commander of the Watch has to be your vassal
		completely_controls = title:c_durthang # otherwise players could destroy a watch that someone else established
		completely_controls = title:c_lhingris
		completely_controls = title:c_cirith_ungol
	}
	is_valid_showing_failures_only = {
		is_imprisoned = no
		is_available_adult = yes
	}
	cost = {
		prestige = 500
	}
	effect = {
		custom_tooltip = decision_abandon_watch_on_mordor_custom_desc
		trigger_event = {
			id = gondor.4002
		}
		add_to_global_variable_list = {
            name = unavailable_unique_decisions
            target = flag:decision_abandon_watch_on_mordor
        }
		remove_list_global_variable = {
			name = unavailable_unique_decisions
   			target = flag:decision_recreate_watch_on_mordor
		}
	}
}

## Liberate Gondor ##
# If Gondor is destroyed by Mordor, good faith rulers can attempt to liberate it, putting gondorians back in charge #
decision_restore_defeated_gondor = {
	sort_order = 85
	title = decision_restore_defeated_gondor
	picture = {
		reference ="gfx/interface/illustrations/decisions/decision_minas_tirith_03.dds"
	}
	selection_tooltip = decision_restore_defeated_gondor_tooltip
	desc = decision_restore_defeated_gondor_desc
	confirm_text = decision_restore_defeated_gondor_confirm

	decision_group_type = realms_in_exile_major

	cooldown = { years = 5 }

	# IS_SHOWN
	is_shown = {
		#current_year >= 4035 # Is only shown if bookmark is after the two kingdoms split
		
		exists = title:e_mordor.holder
		custom_tooltip = decision_restore_defeated_gondor_tt1
		faith_is_good = yes

		NAND = { # Do not show while another liberation war is ongoing
            title:e_mordor.holder = { has_character_flag = attacked_in_gondor_liberation }
			any_ruler = { has_character_flag = liberating_gondor }
		}
		
		AND = {
			OR = {
				NOT = { exists = title:e_gondor.holder }
				title:e_gondor.holder = { faith_is_evil = yes }
			}
			OR = {
				NOT = { exists = title:e_gondor_steward.holder }
				title:e_gondor_steward.holder = { faith_is_evil = yes }
			}
			NOT = { exists = title:e_castamir.holder }
		}
		
		title:c_minas_tirith.holder = { faith_is_evil = yes }
		title:c_minas_tirith.holder.top_liege = { faith_is_evil = yes }
		
		OR = {
			AND = {
				highest_held_title_tier >= tier_kingdom
				is_independent_ruler = yes
			}
			is_landless_adventurer = yes 
		}
		NAND = {
			is_tributary = yes
			suzerain = { is_maiar_fallen = yes }
		}
		NOT = { has_trait = sailed_west }
	}
	
	# IS_VALID
	is_valid = {
		custom_tooltip = decision_restore_defeated_gondor_tt1
		prestige_level >= 4
		OR = {
			AND = {
				highest_held_title_tier >= tier_kingdom
				is_independent_ruler = yes
			}
			is_landless_adventurer = yes 
		}
		custom_tooltip = {
			text = IS_TRIBUTARY_OF_SAURON
			NAND = {
				is_tributary = yes
				suzerain = { is_maiar_fallen = yes }
			}
		}
	}
	
	is_valid_showing_failures_only = {
		is_imprisoned = no
		is_lotr_adult = yes
		is_at_war = no
	}
	
	# EFFECT 
	effect = {
		custom_tooltip = decision_restore_defeated_gondor.tt2
		add_character_flag = liberating_gondor
		
		if = {
			start_war = {
				casus_belli = restore_gondor_cb
				target = title:c_minas_tirith.holder.top_liege
				#target_title = title:e_gondor
			}
		}
		trigger_event = gondor.6500 
	}

	cost = { # 
		gold = medium_gold_value
	}

	# AI value
	ai_goal = yes
	ai_potential = { always = yes }
	ai_will_do = { base = 25 }
}

decision_join_gondor_liberation = {
	sort_order = 85
	title = decision_join_gondor_liberation
	picture = {
		reference ="gfx/interface/illustrations/decisions/decision_minas_tirith_03.dds"
	}
	selection_tooltip = decision_join_gondor_liberation_tooltip
	desc = decision_join_gondor_liberation_desc
	confirm_text = decision_join_gondor_liberation_confirm

	decision_group_type = realms_in_exile_major

	# IS_SHOWN
	is_shown = {
		#current_year >= 4035 # Is only shown if bookmark is after the two kingdoms split
		
		exists = title:e_mordor.holder
		has_character_flag = can_join_gondor_liberation
		faith_is_good = yes
		
		AND = {
			OR = {
				NOT = { exists = title:e_gondor.holder }
				title:e_gondor.holder = { faith_is_evil = yes }
			}
			OR = {
				NOT = { exists = title:e_gondor_steward.holder }
				title:e_gondor_steward.holder = { faith_is_evil = yes }
			}
			NOT = { exists = title:e_castamir.holder }
		}
		
		title:c_minas_tirith.holder = { faith_is_evil = yes }
		title:c_minas_tirith.holder.top_liege = { faith_is_evil = yes }
		
		NOT = { has_trait = sailed_west }
		NOT = { is_ai = yes }
	}
	
	# IS_VALID
	is_valid = {
		custom_tooltip = {
			text = decision_join_gondor_liberation_tt
			title:e_mordor.holder = { has_character_flag = attacked_in_gondor_liberation }
			any_ruler = { has_character_flag = liberating_gondor }
		}
		custom_tooltip = {
			text = IS_TRIBUTARY_OF_SAURON
			NAND = {
				is_tributary = yes
				suzerain = { is_maiar_fallen = yes }
			}
		}
	}
	
	is_valid_showing_failures_only = {
		is_imprisoned = no
		is_lotr_adult = yes
	}
	
	# EFFECT 
	effect = {
		every_ruler = {
			limit = {
				is_at_war = yes 
				has_character_flag = liberating_gondor
			}
			save_scope_as = gondorian_liberator
		}
		scope:gondorian_liberator = {
			every_character_war = {
				limit = {
					using_cb = restore_gondor_cb
				}
				add_attacker = root
			}
		}
		add_prestige = medium_prestige_gain
		add_legitimacy = minor_legitimacy_gain
		remove_character_flag = can_join_gondor_liberation
	}

	cost = { # 
	}

	# AI value
	ai_goal = yes
	ai_potential = { always = yes }
	ai_will_do = { base = 25 }
}

decision_calenardhon_calemmir = {
	sort_order = 50
	title = decision_calenardhon_calemmir
	picture = {
		reference ="gfx/interface/illustrations/decisions/decision_breeland.dds"
	}
	selection_tooltip = decision_calenardhon_calemmir_tooltip
	desc = decision_calenardhon_calemmir_desc
	confirm_text = decision_calenardhon_calemmir_confirm

	decision_group_type = realms_in_exile_minor

	# IS_SHOWN
	is_shown = {
		current_year >= 6580 # Only after the founding of Rohan
		has_title = title:k_rohan
		##Quonton
		culture = { 
			OR = { 
				has_cultural_pillar = heritage_dunedain 
				has_cultural_tradition = tradition_new_numenor
			}
		}
		##End Quonton
		NOT = {
			is_target_in_global_variable_list = {
				name = unavailable_unique_decisions
				target = flag:decision_calenardhon_calemmir
			}
		}
	}
	
	# IS_VALID
	is_valid = {
		has_title = title:k_rohan
		##Quonton
		culture = { 
			OR = { 
				has_cultural_pillar = heritage_dunedain 
				has_cultural_tradition = tradition_new_numenor
			}
		}
		##End Quonton
	}
	
	is_valid_showing_failures_only = {
		is_imprisoned = no
		is_lotr_adult = yes
		is_at_war = no
	}
	
	
	# EFFECT 
	effect = {
		custom_tooltip = decision_calenardhon_calemmir.tt
		title:k_rohan = {
 			set_capital_county = title:c_aldburg
		}
		add_to_global_variable_list = {
			name = unavailable_unique_decisions
			target = flag:decision_calenardhon_calemmir
		}
	}

	cost = { # 
		prestige = medium_prestige_value
	}

	# AI value
	ai_goal = yes
	ai_potential = { always = yes }
	ai_will_do = { base = 100 }
}

decision_establish_the_ithilien_rangers = {
	sort_order = 50
	title = decision_establish_the_ithilien_rangers
	picture = {
		reference ="gfx/interface/illustrations/decisions/decision_breeland.dds"
	}
	selection_tooltip = decision_establish_the_ithilien_rangers_tt
	desc = decision_establish_the_ithilien_rangers_desc
	confirm_text = decision_establish_the_ithilien_rangers_confirm

	decision_group_type = realms_in_exile_major

	# IS_SHOWN
	is_shown = {
		is_gondor = yes
		title:k_ithilien = {
			any_de_jure_county = {
				holder = {
					faith_is_evil = yes
					is_gondor = no
				}
			}
		}
		NOT = {
			is_target_in_global_variable_list = {
				name = unavailable_unique_decisions
				target = flag:establish_the_ithilien_rangers
			}
		}
	}
	
	# IS_VALID
	is_valid = {
		completely_controls = title:c_henneth_annun
		completely_controls = title:c_aranelaith
		custom_tooltip = {
			text = decision_establish_the_ithilien_rangers.trigger
			title:k_ithilien = {
				any_de_jure_county = {
					holder = {
						faith_is_evil = yes
			
					}
					any_neighboring_county = {
						holder.top_liege ?= {
							is_gondor = yes
						}
					}
				}
			}
		}
	}
	
	is_valid_showing_failures_only = {
		is_imprisoned = no
		is_lotr_adult = yes
		is_at_war = no
	}
	
	effect = {
		custom_tooltip = decision_establish_the_ithilien_rangers.tt # Unlock the MAA
		spawn_army = { # Event troops! 
			uses_supply = no
			inheritable = yes
			name = ithilien_rangers_force
			men_at_arms = {
				type = rangers_of_ithilien
				stacks = 5
			}
			location = capital_province		
		}
		province:229 = { # Add Henneth Annun building
			add_special_building_slot = wonder_henneth_annun
			add_special_building = wonder_henneth_annun
		}
		province:208 = { # Add Cair Andros building
			remove_building = wonder_citadel_cairos_02
			add_special_building = wonder_citadel_cairos_03
		}
		add_to_global_variable_list = {
			name = unavailable_unique_decisions
			target = flag:establish_the_ithilien_rangers
		}
	}

	cost = {
		gold = 750
		prestige = 250
	}

	# AI value
	ai_goal = yes
	ai_potential = { always = yes }
	ai_will_do = { base = 100 }
	# ai_check_interval = 72 # Mutually exclusive with `ai_goal = yes`
}

#############################
### Oath of Eorl Decision ###
#############################

decision_oath_of_eorl_gondor = {
	title = decision_oath_of_eorl_gondor
	picture = {
		reference = "gfx/interface/illustrations/decisions/decision_oath_of_eorl.dds"
	}
	
	ai_goal = yes

	ai_potential = {
		always = yes
	}
	ai_will_do = {
		base = 100
	}

	selection_tooltip = decision_oath_of_eorl_gondor_tooltip
	desc = decision_oath_of_eorl_gondor_desc
	confirm_text = decision_oath_of_eorl_gondor_confirm
	
	decision_group_type = realms_in_exile_minor
	
	sort_order = 500
	
	is_shown = {
		is_landed = yes
		exists = title:k_rohan
		NOT = { has_title = title:k_rohan }
		OR = {
			has_title = title:e_gondor_steward
			has_title = title:e_gondor
			AND = {
				has_title = title:e_reunitedkingdom
				is_target_in_global_variable_list = {
					name = unavailable_unique_decisions
					target = flag:decision_solidify_reunited_kingdom
				}
			}
		}
		religion = { is_in_family = rf_eruhini }
		OR = {
			title:k_rohan.holder.religion = { is_in_family = rf_eruhini }
			AND = {
				exists = global_var:gondor_approves_of_wulf
				global_var:gondor_approves_of_wulf = yes
			}
		}	
	}

	is_valid = {
		is_imprisoned = no
		custom_tooltip = {
			text = "LOTR_AT_PEACE_WITH_ROHAN_TRIGGER"
			lotr_at_peace_with_rohan = yes
		}
		custom_tooltip = {
			text = "LOTR_NOT_ALREADY_FIGHTING_ALONGSIDE_ROHAN_TRIGGER"
			OR = {
				is_at_war = no
				any_war_ally = {
					this = title:k_rohan.holder
					count = 0
				}
			}
		}
		custom_tooltip = {
			text = "is_in_defensive_war_vs_empire"
			is_at_war = yes
			any_character_war = {
				is_defender = root
				any_war_attacker = { highest_held_title_tier >= tier_kingdom }
			}
		}
		custom_tooltip = {
			text = "LOTR_ARMIES_ARE_OUTNUMBERED_TRIGGER"
			lotr_armies_are_outnumbered = yes
		}
		title:k_rohan.holder = {
			trigger_if = {
				limit = {
					exists = global_var:gondor_approves_of_wulf
					global_var:gondor_approves_of_wulf = yes
				}
				OR = {
					dynasty = dynasty:dynasty_eorl
					dynasty = dynasty:dynasty_freca
				}
			}
			trigger_else = {
				dynasty = dynasty:dynasty_eorl
			}
		}
		custom_tooltip = {
			text = "LOTR_NOT_CIVIL_WAR_TRIGGER"
			any_character_war = { #Rohan won't be called in Gondor's civil wars
				casus_belli = {
					OR = {
						primary_attacker = { NOT = { is_vassal_of = root } }
						primary_defender = { NOT = { is_vassal_of = root } }
					}
				}
			}
		}
	}

	is_valid_showing_failures_only = {
		custom_tooltip = {
			text = is_considering_wulf
			NOT = { has_character_flag = considering_wulf }
		}
	}
	
	effect = {	
		play_music_cue = lotr_cue_beacons
		save_scope_as = gondor
		custom_tooltip = "call_on_rohan_for_aid_effect"
		title:k_rohan.holder = {	
			trigger_event = {
				id = rohan.2000
				days = { 30 60 }
			}
		}
	}

	cooldown = { years = 5 }
	
	ai_will_do = {
		base = 100
	}
}

#######################
### MINOR DECISIONS ###
#######################

### Recruit Northmen ###
# Minor Decision to invite Northmen Settlers to your Gondorian lands in Mid TA
decision_invite_northron_settlers = {
	picture = {
		reference = "gfx/interface/illustrations/decisions/decision_edoras_02.dds"
	}
	ai_check_interval = 40
	
	cooldown = {
		years = lotr_northron_settlers_cooldown
	}

	
	desc = {
		first_valid = {
			triggered_desc = {
				trigger = {
					culture = { has_cultural_pillar = heritage_northron }
				}
				desc = decision_invite_northron_settlers_desc_norse
			}
			desc = decision_invite_northron_settlers_desc
		}
	}
	selection_tooltip = decision_invite_northron_settlers_tooltip
	
	decision_group_type = realms_in_exile_minor

	is_shown = {
		highest_held_title_tier > tier_barony
		is_landed = yes
		OR = {
			# Dunedain of Gondor can do it
			##Quonton
			culture = { 
				OR = { 
					has_cultural_pillar = heritage_dunedain 
					has_cultural_tradition = tradition_new_numenor
				}
			}
			##End Quonton
			# Northmen under Gondor can do it
			AND = {
				culture = { has_cultural_pillar = heritage_northron }
				top_liege.culture = { 
					##Quonton
					OR = { 
						has_cultural_pillar = heritage_dunedain 
						has_cultural_tradition = tradition_new_numenor
					}
					##End Quonton
				}
			}
		}
		game_start_date >= 5000
		game_start_date < 5889 # Fall of Rhovanion

	}
	
	is_valid = {
		highest_held_title_tier > tier_barony
		OR = {
			capital_province = {
				geographical_region = custom_western_gondor
			}
			capital_province = {
				geographical_region = custom_eastern_gondor
			}
		}
	}

	is_valid_showing_failures_only = {
		is_available_adult = yes
	}

    widget = {
    	gui = "decision_view_widget_decision_invite_northron_settlers"
		controller = decision_option_list_controller
    	
		#decision_has_second_step = yes
		#decision_custom_widget_container = "custom_widgets_container_step_two"
		decision_to_second_step_button = "lotr_invite_northron_type" 

		item = {
			value = lotr_invite_northron_courtiers_option
			current_description = lotr_invite_northron_courtiers_option_desc
			localization = lotr_invite_northron_courtiers_option
			icon = "gfx/interface/icons/widgets/RICE_normandy_northmen_courtiers.dds"

			ai_chance = {
				value = 10
			}
		}

		item = {
			value = lotr_invite_northron_colonists_option
			current_description = lotr_invite_northron_colonists_option_desc
			localization = lotr_invite_northron_colonists_option
			icon = "gfx/interface/icons/widgets/RICE_normandy_northmen_settlers.dds"

			ai_chance = {
				value = 10
			}
		}

		item = {
			is_valid = {
				trigger_if = {
					limit = {
						government_allows = administrative
						is_independent_ruler = no
					}
					custom_description = {
						text = lotr_admin_type_military_frontier_imperial
						#OR = {
						#	vassal_contract_has_flag = admin_theme_military
						#	vassal_contract_has_flag = admin_theme_frontier
						#	vassal_contract_has_flag = admin_theme_imperial
						#}
						NOR = {
							vassal_contract_has_flag = admin_theme_balanced
							vassal_contract_has_flag = admin_theme_civilian
							vassal_contract_has_flag = admin_theme_naval
						}
					}
				}
			}
			value = lotr_invite_northron_mercenaries_option
			current_description = lotr_invite_northron_mercenaries_option_desc
			localization = lotr_invite_northron_mercenaries_option
			icon = "gfx/interface/icons/widgets/RICE_normandy_northmen_warriors.dds"

			ai_chance = {
				value = 10
			}
		}

		item = {
			is_valid = {
				trigger_if = {
					limit = {
						government_allows = administrative
						is_independent_ruler = no
					}
					custom_description = {
						text = lotr_admin_type_balanced_civilian_imperial
						#OR = {
						#	vassal_contract_has_flag = admin_theme_balanced
						#	vassal_contract_has_flag = admin_theme_civilian
						#	vassal_contract_has_flag = admin_theme_imperial
						#}
						NOR = {
							vassal_contract_has_flag = admin_theme_military
							vassal_contract_has_flag = admin_theme_frontier
							vassal_contract_has_flag = admin_theme_naval
						}
					}
				}
			}
			value = lotr_invite_northron_traders_option
			current_description = lotr_invite_northron_traders_option_desc
			localization = lotr_invite_northron_traders_option
			icon = "gfx/interface/icons/widgets/RICE_normandy_northmen_traders.dds"

			ai_chance = {
				value = 10
			}
		}

		item = {
			is_valid = {
				owns_multiple_counties_not_colony = yes
			}
			value = lotr_invite_northron_rulers_option
			current_description = lotr_invite_northron_rulers_option_desc
			localization = lotr_invite_northron_rulers_option
			icon = "gfx/interface/icons/widgets/RICE_normandy_northmen_rulers.dds"

			ai_chance = {
				value = 10
			}
		}

	}

	effect = {

		custom_tooltip = decision_invite_northron_settlers_effect_tooltip_1
		custom_tooltip = decision_invite_northron_settlers_effect_tooltip_2
		custom_tooltip = decision_invite_northron_settlers_effect_tooltip_3

		# Not sure why AI can't pick one option or another
		if = {
			limit = { is_ai = yes }
			random_list = {
				12 = {
					set_variable = {
						name = lotr_northron_settler_type
						value = flag:courtiers
					}
				}
				12 = {
					set_variable = {
						name = lotr_northron_settler_type
						value = flag:colonists
					}
				}
				12 = {
					trigger = {
						trigger_if = {
							limit = {
								government_allows = administrative
								is_independent_ruler = no
							}
							NOR = {
								vassal_contract_has_flag = admin_theme_balanced
								vassal_contract_has_flag = admin_theme_civilian
								vassal_contract_has_flag = admin_theme_naval
							}
						}
					}
					set_variable = {
						name = lotr_northron_settler_type
						value = flag:mercenaries
					}
				}
				12 = {
					trigger = {
						trigger_if = {
							limit = {
								government_allows = administrative
								is_independent_ruler = no
							}
							NOR = {
								vassal_contract_has_flag = admin_theme_military
								vassal_contract_has_flag = admin_theme_frontier
								vassal_contract_has_flag = admin_theme_naval
							}
						}
					}
					set_variable = {
						name = lotr_northron_settler_type
						value = flag:traders
					}
				}
				1 = {
					trigger = {
						owns_multiple_counties_not_colony = yes
					}
					set_variable = {
						name = lotr_northron_settler_type
						value = flag:rulers
					}
				}
			}
		}
		else_if = {
			limit = {
				scope:lotr_invite_northron_rulers_option = yes
			}
			set_variable = {
				name = lotr_northron_settler_type
				value = flag:rulers
			}
		}
		
		trigger_event = mundburgian.3020
	}

	minimum_cost = { 
		gold = { value = lotr_northron_settlers_small_cost } # Will depend
		prestige = 300
	}	

	ai_potential = {
		short_term_gold > lotr_northron_settlers_large_cost
	}

	ai_will_do = {
		base = 30
		modifier = {
			add = 30
			OR = {
				culture = { has_cultural_parameter = heritage_group_northmen }
				any_spouse = {
					culture = { has_cultural_parameter = heritage_group_northmen }
				}
				any_parent = {
					even_if_dead = yes
					culture = { has_cultural_parameter = heritage_group_northmen }
				}
			}
		}
		modifier = {
			add = 5
			has_trait = ambitious
		}
		modifier = {
			add = 5
			has_trait = generous
		}
		modifier = {
			add = -20
			has_trait = paranoid
		}
		modifier = {
			add = -20
			has_trait = zealous
		}
		modifier = {
			add = -50
			has_trait = arrogant
		}
		modifier = {
			add = -10
			game_start_date < 5283 #Valacars Marriage
		}
		modifier = { #AI does it in Eastern Gondor, after Eldacar ascends
			add = -25
			OR = {
				game_start_date < 5480 #Eldacars Ascension
				capital_province = {
					NOT = { geographical_region = custom_eastern_gondor }
				}
			}
		}
	}
}

##Quonton Rohan 
decision_integrate_rohan = {
	sort_order = 81
	title = decision_integrate_rohan
	picture = {
		reference = "gfx/interface/illustrations/decisions/decision_edoras_01.dds"
	}

	decision_group_type = realms_in_exile_major
	
	ai_goal = yes
	ai_potential = {
		always = yes
	}
	ai_will_do = {
		base = 100
	}

	selection_tooltip = decision_integrate_rohan_tooltip
	desc = decision_integrate_rohan_desc
	confirm_text = decision_integrate_rohan_confirm
	
	is_shown = {
		current_year >= 6543
		is_ruler = yes
		is_landed = yes
		OR = {
			has_primary_title = title:e_reunitedkingdom
			has_primary_title = title:e_numenor_in_exile
		}
		
		# OR = {
		# 	has_title = title:e_gondor
		# 	has_title = title:e_gondor_steward
		# 	has_title = title:e_castamir
		# }	
		exists = title:k_rohan.holder
		is_target_in_global_variable_list = {
			name = unavailable_unique_decisions
			target = flag:decision_destroy_mordor
		}
		title:k_rohan.holder ?= {
			is_independent_ruler = yes
			faith_is_evil = no
		}
		NOR = {
			has_title = title:k_rohan
			is_target_in_global_variable_list = {
				name = unavailable_unique_decisions
				target = flag:decision_integrate_rohan
			}
			title:k_rohan.holder = {
				faith_is_evil = yes
				is_independent_ruler = no
			}
		}
	}
	
	is_valid_showing_failures_only = {
		is_imprisoned = no
		is_available_adult = yes
		is_at_war = no
		NOT = {
			has_truce = title:k_rohan.holder		
		}
	}

	is_valid = {
		is_independent_ruler = yes
		# completely_controls = title:e_gondor
		# prestige_level >= very_high_prestige_level
		OR = {
			has_primary_title = title:e_reunitedkingdom
			has_primary_title = title:e_numenor_in_exile
		}
		title:k_rohan.holder ?= {
			AND = { 
				is_independent_ruler = yes
				faith_is_evil = no
			}
			OR = { 
				custom_tooltip = {
					text = rohan_ruler_is_dunedain
					culture = { 
						OR = { 
							has_cultural_pillar = heritage_dunedain 
							has_cultural_tradition = tradition_new_numenor
						}	
					}
				}
				AND = { 
					dynasty = dynasty:dynasty_eorl # The House of Eorl still holds Rohan		 
					title:k_rohan.holder = {
						opinion = {
							target = root
							value >= 100
						}
						trigger_if = {
							limit = {
								exists = title:e_reunitedkingdom.holder
							}
							is_allied_to = title:e_reunitedkingdom.holder
						}
						trigger_else_if = {
							limit = {
								exists = title:e_gondor.holder
							}
							is_allied_to = title:e_gondor.holder
						}
						trigger_else = {
							trigger_if = {
								limit = {
									exists = title:e_numenor_in_exile.holder
								}
								is_allied_to = title:e_numenor_in_exile.holder
							}
						}
					}
				}
				AND = { 
					dynasty = dynasty:dynasty_ostomir # The House of Hurionionath has taken over		
					title:k_rohan.holder = {
						opinion = {
							target = root
							value >= 100
						}
						trigger_if = {
							limit = {
								exists = title:e_reunitedkingdom.holder
							}
							is_allied_to = title:e_reunitedkingdom.holder
						}
						trigger_else_if = {
							limit = {
								exists = title:e_gondor.holder
							}
							is_allied_to = title:e_gondor.holder
						}
						trigger_else = {
							trigger_if = {
								limit = {
									exists = title:e_numenor_in_exile.holder
								}
								is_allied_to = title:e_numenor_in_exile.holder
							}
						}
					}
				}				
			}
		}
		# OR = {
		# 	has_title = title:e_gondor
		# 	has_title = title:e_gondor_steward
		# 	has_title = title:e_castamir
		# }
	}	

	effect = {
		custom_tooltip = reclaim_calenardhon_dunedain
		trigger_event = {
			id = dunedain_identity.2
			days = 1
		}
		add_to_global_variable_list = {
			name = unavailable_unique_decisions
			target = flag:decision_integrate_rohan
		}
	}
}
